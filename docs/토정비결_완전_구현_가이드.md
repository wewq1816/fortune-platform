# í† ì •ë¹„ê²° ì™„ì „ êµ¬í˜„ ê°€ì´ë“œ

**ì‘ì„±ì¼**: 2025-10-04  
**ëª©ì **: ìƒˆë¡œìš´ Claude ì°½ì—ì„œ ì¦‰ì‹œ í† ì •ë¹„ê²° ì‹œìŠ¤í…œ êµ¬ì¶• ì‹œì‘  
**í”„ë¡œì íŠ¸**: ìš´ì„¸í”Œë«í¼ (C:\xampp\htdocs\mysite\ìš´ì„¸í”Œë«í¼\)

---

## ğŸ¯ **1. í”„ë¡œì íŠ¸ ì•„í‚¤í…ì²˜ (ë°˜ë“œì‹œ ìˆ™ì§€)**

### **í•µì‹¬ ì›ì¹™**
```
[ì…ë ¥] â†’ [ì—”ì§„(ì •í™•í•œ ê³„ì‚°)] â†’ [í”„ë¡¬í”„íŠ¸ ìƒì„±] â†’ [Claude Haiku(í•´ì„ë§Œ)] â†’ [ê²°ê³¼]
```

**ì¤‘ìš”**: Claude HaikuëŠ” **ê³„ì‚° ì ˆëŒ€ ì•ˆ ì‹œí‚´**. ì˜¤ì§ **ìì—°ì–´ ë²ˆì—­ë§Œ** ìˆ˜í–‰!

### **ë””ë ‰í† ë¦¬ êµ¬ì¡°**
```
ìš´ì„¸í”Œë«í¼/
â”œâ”€â”€ engines/
â”‚   â”œâ”€â”€ core/                    # ê³„ì‚° ì—”ì§„
â”‚   â”‚   â”œâ”€â”€ daily-engine.js      âœ… ì™„ì„±
â”‚   â”‚   â”œâ”€â”€ horoscope-engine.js  âœ… ì™„ì„±
â”‚   â”‚   â”œâ”€â”€ dream-engine.js      âœ… ì™„ì„±
â”‚   â”‚   â”œâ”€â”€ lotto-engine.js      âœ… ì™„ì„±
â”‚   â”‚   â”œâ”€â”€ compatibility-engine.js âœ… ì™„ì„±
â”‚   â”‚   â””â”€â”€ tojeong-engine.js    âŒ ë¹„ì–´ìˆìŒ (êµ¬í˜„ í•„ìš”!)
â”‚   â”œâ”€â”€ data/                    # ë°ì´í„° íŒŒì¼
â”‚   â”‚   â””â”€â”€ tojeong-gua-144.json âŒ ì—†ìŒ (ìƒì„± í•„ìš”!)
â”‚   â”œâ”€â”€ prompts/                 # Claude í”„ë¡¬í”„íŠ¸
â”‚   â”‚   â”œâ”€â”€ daily-fortune-prompt.js âœ… ì™„ì„±
â”‚   â”‚   â”œâ”€â”€ horoscope-prompt.js     âœ… ì™„ì„±
â”‚   â”‚   â”œâ”€â”€ compatibility-prompt.js âœ… ì™„ì„±
â”‚   â”‚   â””â”€â”€ tojeong-prompt.js    âŒ ì—†ìŒ (ìƒì„± í•„ìš”!)
â”‚   â””â”€â”€ utils/                   # ìœ í‹¸ë¦¬í‹°
â”‚       â”œâ”€â”€ saju-calculator.js   âœ… ì™„ì„±
â”‚       â”œâ”€â”€ ganzi-calculator.js  âœ… ì™„ì„±
â”‚       â””â”€â”€ element-calculator.js âœ… ì™„ì„±
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ index.html               âœ… ë©”ì¸ í˜ì´ì§€
â”‚   â””â”€â”€ pages/
â”‚       â”œâ”€â”€ daily-fortune.html   âœ… ì™„ì„±
â”‚       â”œâ”€â”€ horoscope.html       âœ… ì™„ì„±
â”‚       â”œâ”€â”€ dream.html           âœ… ì™„ì„±
â”‚       â”œâ”€â”€ lotto.html           âœ… ì™„ì„±
â”‚       â”œâ”€â”€ compatibility-test.html âœ… ì™„ì„±
â”‚       â””â”€â”€ tojeong.html         âŒ ì—†ìŒ (ìƒì„± í•„ìš”!)
â”‚
â””â”€â”€ server.js                    # Node.js ì„œë²„ (í¬íŠ¸ 3000)
```

---

## ğŸ“Š **2. í˜„ì¬ ìƒíƒœ (Phase 1: 95% ì™„ë£Œ)**

### **âœ… ì™„ì„±ëœ ì‹œìŠ¤í…œ (ì°¸ê³ ìš©)**

| ì‹œìŠ¤í…œ | ì—”ì§„ | í”„ë¡¬í”„íŠ¸ | í”„ë¡ íŠ¸ì—”ë“œ | ì‘ë™ |
|--------|------|----------|-----------|------|
| ì˜¤ëŠ˜ì˜ ìš´ì„¸ | âœ… daily-engine.js | âœ… daily-fortune-prompt.js | âœ… daily-fortune.html | âœ… |
| ë³„ìë¦¬ | âœ… horoscope-engine.js | âœ… horoscope-prompt.js | âœ… horoscope.html | âœ… |
| ê¿ˆí•´ëª½ | âœ… dream-engine.js | (DB ê²€ìƒ‰) | âœ… dream.html | âœ… |
| ë¡œë˜ | âœ… lotto-engine.js | (ê³„ì‚°ë§Œ) | âœ… lotto.html | âœ… |
| ê¶í•© | âœ… compatibility-engine.js | âœ… compatibility-prompt.js | âœ… compatibility-test.html | âœ… |

### **âŒ í† ì •ë¹„ê²° (êµ¬í˜„ í•„ìš”!)**
- ì—”ì§„: âŒ ë¹„ì–´ìˆìŒ
- í”„ë¡¬í”„íŠ¸: âŒ ì—†ìŒ  
- í”„ë¡ íŠ¸ì—”ë“œ: âŒ ì—†ìŒ
- ë°ì´í„°: âŒ 144ê´˜ ì—†ìŒ

---

## ğŸ¯ **3. í† ì •ë¹„ê²° êµ¬í˜„ ê³„íš (5ë‹¨ê³„)**

### **ìš°ì„ ìˆœìœ„ ìˆœì„œ**
```
1ë‹¨ê³„: 144ê´˜ ë°ì´í„° ìƒì„±     â† ê°€ì¥ ì¤‘ìš”!
2ë‹¨ê³„: ì—”ì§„ êµ¬í˜„ (ê³„ì‚° ë¡œì§)
3ë‹¨ê³„: í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°
4ë‹¨ê³„: í”„ë¡ íŠ¸ì—”ë“œ (UI)
5ë‹¨ê³„: ì„œë²„ API ì—°ë™
```

---

## ğŸ“ **4. 1ë‹¨ê³„: 144ê´˜ ë°ì´í„° ìƒì„±**

### **íŒŒì¼**: `engines/data/tojeong-gua-144.json`

### **ë°ì´í„° êµ¬ì¡°**
```json
{
  "1": {
    "number": 1,
    "name": "ê±´ì§€ê±´(ä¹¾ä¹‹ä¹¾)",
    "symbol": "â˜°â˜°",
    "level": "ëŒ€ê¸¸",
    "description": "í•˜ëŠ˜ì´ í•˜ëŠ˜ì„ ë§Œë‚˜ë‹ˆ ëŒ€ê¸¸í•œ ê´˜ì´ë‹¤",
    "monthly": {
      "1": "ì •ì›”ì—ëŠ” í•´ê°€ ë– ì˜¤ë¥´ë‹ˆ ë§Œì‚¬ê°€ í˜•í†µí•˜ë„ë‹¤",
      "2": "2ì›”ì—ëŠ” ë´„ê¸°ìš´ì´ ì™„ì—°í•˜ë‹ˆ ìƒˆì‹¹ì´ ë‹ì•„ë‚˜ë„ë‹¤",
      "3": "3ì›”ì—ëŠ” ê½ƒì´ í™œì§ í”¼ë‹ˆ ê¸°ì¨ì´ ê°€ë“í•˜ë„ë‹¤",
      "4": "4ì›”ì—ëŠ” ë‚˜ë¬´ê°€ ë¬´ì„±í•˜ë‹ˆ ì„±ì¥ì˜ ì‹œê¸°ë¡œë‹¤",
      "5": "5ì›”ì—ëŠ” ì—´ë§¤ê°€ ë§ºíˆë‹ˆ ë…¸ë ¥ì˜ ê²°ì‹¤ì´ë¡œë‹¤",
      "6": "6ì›”ì—ëŠ” í–‡ì‚´ì´ ëœ¨ê±°ìš°ë‹ˆ ì—´ì •ì„ ë°œíœ˜í•  ë•Œ",
      "7": "7ì›”ì—ëŠ” ì¥ë§ˆê°€ ì˜¤ë‹ˆ ì¸ë‚´ê°€ í•„ìš”í•œ ë•Œ",
      "8": "8ì›”ì—ëŠ” ê°€ì„ë°”ëŒ ë¶€ë‹ˆ ìˆ˜í™•ì˜ ê³„ì ˆì´ë¡œë‹¤",
      "9": "9ì›”ì—ëŠ” ë‹¨í’ì´ ë“œë‹ˆ ë³€í™”ë¥¼ ë§ì´í•  ë•Œ",
      "10": "10ì›”ì—ëŠ” ì„œë¦¬ê°€ ë‚´ë¦¬ë‹ˆ ì¤€ë¹„ê°€ í•„ìš”í•˜ë„ë‹¤",
      "11": "11ì›”ì—ëŠ” ê²¨ìš¸ì´ ì˜¤ë‹ˆ íœ´ì‹ì„ ì·¨í•  ë•Œ",
      "12": "12ì›”ì—ëŠ” í•œ í•´ë¥¼ ë§ˆë¬´ë¦¬í•˜ë‹ˆ ë°˜ì„±ì˜ ì‹œê°„"
    }
  },
  "2": {
    "number": 2,
    "name": "ê±´ì§€íƒœ(ä¹¾ä¹‹å…Œ)",
    "symbol": "â˜°â˜±",
    "level": "ê¸¸",
    "description": "í•˜ëŠ˜ì´ ëª»ì„ ë§Œë‚˜ë‹ˆ ê¸°ì¨ì´ ìˆëŠ” ê´˜ì´ë‹¤",
    "monthly": {
      "1": "ì •ì›”ì—ëŠ” ì›ƒìŒê½ƒì´ í”¼ë‹ˆ ì¦ê±°ìš´ ì‹œì‘ì´ë¡œë‹¤",
      ...
    }
  },
  ...
  "144": {
    ...
  }
}
```

### **ë ˆë²¨ ë¶„ë¥˜**
- ëŒ€ê¸¸(å¤§å‰): â­â­â­â­â­
- ê¸¸(å‰): â­â­â­â­
- ì¤‘ê¸¸(ä¸­å‰): â­â­â­
- ì†Œê¸¸(å°å‰): â­â­
- í‰(å¹³): â­
- í‰(å‡¶): (ë³„ ì—†ìŒ)

---

## ğŸ”§ **5. 2ë‹¨ê³„: ì—”ì§„ êµ¬í˜„**

### **íŒŒì¼**: `engines/core/tojeong-engine.js`

```javascript
/**
 * í† ì •ë¹„ê²° ê³„ì‚° ì—”ì§„
 * 
 * í•µì‹¬: 144ê´˜ ì‹œìŠ¤í…œ (ìƒì¤‘í•˜ 3ê´˜ ì¡°í•©)
 */

// íƒœì„¸ìˆ˜ (ë…„ ê°„ì§€)
const TAESE_SOO = {
  'ê°‘ì': 1, 'ì„ì¶•': 2, 'ë³‘ì¸': 3, 'ì •ë¬˜': 4, 'ë¬´ì§„': 5, 'ê¸°ì‚¬': 6,
  'ê²½ì˜¤': 7, 'ì‹ ë¯¸': 8, 'ì„ì‹ ': 9, 'ê³„ìœ ': 10, 'ê°‘ìˆ ': 11, 'ì„í•´': 12,
  'ë³‘ì': 1, 'ì •ì¶•': 2, 'ë¬´ì¸': 3, 'ê¸°ë¬˜': 4, 'ê²½ì§„': 5, 'ì‹ ì‚¬': 6,
  'ì„ì˜¤': 7, 'ê³„ë¯¸': 8, 'ê°‘ì‹ ': 9, 'ì„ìœ ': 10, 'ë³‘ìˆ ': 11, 'ì •í•´': 12,
  'ë¬´ì': 1, 'ê¸°ì¶•': 2, 'ê²½ì¸': 3, 'ì‹ ë¬˜': 4, 'ì„ì§„': 5, 'ê³„ì‚¬': 6,
  'ê°‘ì˜¤': 7, 'ì„ë¯¸': 8, 'ë³‘ì‹ ': 9, 'ì •ìœ ': 10, 'ë¬´ìˆ ': 11, 'ê¸°í•´': 12,
  'ê²½ì': 1, 'ì‹ ì¶•': 2, 'ì„ì¸': 3, 'ê³„ë¬˜': 4, 'ê°‘ì§„': 5, 'ì„ì‚¬': 6,
  'ë³‘ì˜¤': 7, 'ì •ë¯¸': 8, 'ë¬´ì‹ ': 9, 'ê¸°ìœ ': 10, 'ê²½ìˆ ': 11, 'ì‹ í•´': 12,
  'ì„ì': 1, 'ê³„ì¶•': 2, 'ê°‘ì¸': 3, 'ì„ë¬˜': 4, 'ë³‘ì§„': 5, 'ì •ì‚¬': 6,
  'ë¬´ì˜¤': 7, 'ê¸°ë¯¸': 8, 'ê²½ì‹ ': 9, 'ì‹ ìœ ': 10, 'ì„ìˆ ': 11, 'ê³„í•´': 12
};

// ì›”ê±´ìˆ˜
const WOLGUN_SOO = {
  1: 3, 2: 4, 3: 5, 4: 6, 5: 7, 6: 8,
  7: 9, 8: 10, 9: 11, 10: 12, 11: 1, 12: 2
};

// ì¼ì§„ìˆ˜ (ê°„ì§€ â†’ ìˆ«ì)
const ILJIN_SOO = {
  'ê°‘': 1, 'ì„': 2, 'ë³‘': 3, 'ì •': 4, 'ë¬´': 5,
  'ê¸°': 6, 'ê²½': 7, 'ì‹ ': 8, 'ì„': 9, 'ê³„': 10
};

/**
 * ì—°ë„ì˜ ê°„ì§€ ê³„ì‚°
 */
function getYearGanzi(year) {
  const ganList = ['ê²½', 'ì‹ ', 'ì„', 'ê³„', 'ê°‘', 'ì„', 'ë³‘', 'ì •', 'ë¬´', 'ê¸°'];
  const jiList = ['ì‹ ', 'ìœ ', 'ìˆ ', 'í•´', 'ì', 'ì¶•', 'ì¸', 'ë¬˜', 'ì§„', 'ì‚¬', 'ì˜¤', 'ë¯¸'];
  
  const ganIndex = year % 10;
  const jiIndex = year % 12;
  
  return ganList[ganIndex] + jiList[jiIndex];
}

/**
 * ì›”ë³„ ì¼ìˆ˜ ê³„ì‚°
 */
function getDaysInMonth(year, month, isLunar = false) {
  if (isLunar) {
    // ìŒë ¥: í°ë‹¬ 30ì¼, ì‘ì€ë‹¬ 29ì¼ (ê°„ë‹¨ êµ¬í˜„)
    const smallMonths = [4, 6, 9, 11];
    return smallMonths.includes(month) ? 29 : 30;
  } else {
    // ì–‘ë ¥
    return new Date(year, month, 0).getDate();
  }
}

/**
 * í† ì •ë¹„ê²° ë©”ì¸ ê³„ì‚° í•¨ìˆ˜
 */
function calculateTojeong(birthInfo, targetYear) {
  const { year, month, day, isLunar = false } = birthInfo;
  
  try {
    // 1. ë‚˜ì´ ê³„ì‚°
    const age = targetYear - year + 1;
    
    // 2. ì—°ë„ ê°„ì§€
    const yearGanzi = getYearGanzi(targetYear);
    const taeseSoo = TAESE_SOO[yearGanzi] || 1;
    
    // 3. ì›”ê±´ìˆ˜
    const wolgunSoo = WOLGUN_SOO[month] || 1;
    
    // 4. ìƒì¼ ê°„ì§€ (ê°„ë‹¨ ê³„ì‚° - ì‹¤ì œë¡œëŠ” ë§Œì„¸ë ¥ í•„ìš”)
    const dayGan = ['ê°‘', 'ì„', 'ë³‘', 'ì •', 'ë¬´', 'ê¸°', 'ê²½', 'ì‹ ', 'ì„', 'ê³„'][day % 10];
    const iljinSoo = ILJIN_SOO[dayGan] || 1;
    
    // 5. ìƒì¤‘í•˜ ê³„ì‚°
    const sangSu = (age + taeseSoo) % 8 || 8;
    const monthDays = getDaysInMonth(targetYear, month, isLunar);
    const jungSu = (monthDays + wolgunSoo) % 6 || 6;
    const haSu = (day + iljinSoo) % 3 || 3;
    
    // 6. 144ê´˜ ë²ˆí˜¸ ê³„ì‚°
    // ìƒê´˜(8) Ã— ì¤‘ê´˜(6) Ã— í•˜ê´˜(3) = 144ê°€ì§€
    const guaNumber = ((sangSu - 1) * 18) + ((jungSu - 1) * 3) + haSu;
    
    // 7. ê´˜ ë°ì´í„° ë¡œë“œ
    const guaData = require('../data/tojeong-gua-144.json');
    const mainGua = guaData[guaNumber.toString()];
    
    if (!mainGua) {
      throw new Error(`ê´˜ ë²ˆí˜¸ ${guaNumber}ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`);
    }
    
    // 8. 12ê°œì›” ìš´ì„¸ ìƒì„±
    const monthlyFortune = [];
    for (let m = 1; m <= 12; m++) {
      monthlyFortune.push({
        month: m,
        text: mainGua.monthly[m.toString()] || 'ìš´ì„¸ ì •ë³´ ì—†ìŒ'
      });
    }
    
    return {
      success: true,
      year: targetYear,
      yearGanzi: yearGanzi,
      age: age,
      calculation: {
        sangSu: sangSu,
        jungSu: jungSu,
        haSu: haSu,
        guaNumber: guaNumber
      },
      mainGua: {
        number: mainGua.number,
        name: mainGua.name,
        symbol: mainGua.symbol,
        level: mainGua.level,
        description: mainGua.description
      },
      monthlyFortune: monthlyFortune
    };
    
  } catch (error) {
    return {
      success: false,
      error: error.message
    };
  }
}

module.exports = {
  calculateTojeong
};
```

---

## ğŸ’¬ **6. 3ë‹¨ê³„: í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°**

### **íŒŒì¼**: `engines/prompts/tojeong-prompt.js`

```javascript
/**
 * í† ì •ë¹„ê²° Claude API í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°
 */

function generateTojeongPrompt(tojeongData) {
  const { year, yearGanzi, mainGua, monthlyFortune } = tojeongData;
  
  // ì›”ë³„ ì›ë¬¸ í…ìŠ¤íŠ¸ ì¡°í•©
  const monthlyText = monthlyFortune.map((m, i) => 
    `${i + 1}ì›”: ${m.text}`
  ).join('\n');
  
  const prompt = `ë‹¹ì‹ ì€ 30ë…„ ê²½ë ¥ì˜ í† ì •ë¹„ê²° ì „ë¬¸ê°€ì…ë‹ˆë‹¤. 55-65ì„¸ ì—¬ì„± ê³ ê°ì—ê²Œ ë”°ëœ»í•˜ê³  ì‹¤ìš©ì ì¸ ì¡°ì–¸ì„ ì œê³µí•©ë‹ˆë‹¤.

# ê³ ê° ì •ë³´
- ì—°ë„: ${year}ë…„ ${yearGanzi}ë…„
- ì—°ê°„ ì£¼ê´˜: ${mainGua.name} ${mainGua.symbol}
- ê´˜ì˜ ì˜ë¯¸: ${mainGua.description}
- ìš´ì„¸ ë“±ê¸‰: ${mainGua.level}

# ì›”ë³„ ì›ë¬¸ (144ê´˜ í† ì •ë¹„ê²°)
${monthlyText}

# ì‘ì„± ì§€ì¹¨
1. **ì¢…í•©ìš´ì„¸**: 200-350ì
   - ${year}ë…„ ì „ì²´ íë¦„ ìš”ì•½
   - ì£¼ê´˜ ${mainGua.name}ì˜ ì˜ë¯¸ë¥¼ í˜„ëŒ€ì ìœ¼ë¡œ í•´ì„
   - í•œ í•´ë¥¼ ì–´ë–»ê²Œ ë³´ë‚´ë©´ ì¢‹ì„ì§€ êµ¬ì²´ì  ì¡°ì–¸
   
2. **ì›”ë³„ìš´ì„¸**: ê° 150-250ì
   - ì›ë¬¸ì„ 55-65ì„¸ ì—¬ì„±ì´ ì´í•´í•˜ê¸° ì‰½ê²Œ í˜„ëŒ€ì–´ë¡œ í’€ì´
   - ê·¸ ë‹¬ì— ì£¼ì˜í•  ì , ì¢‹ì€ ì¼, ì¡°ì‹¬í•  ì¼
   - êµ¬ì²´ì ì¸ í–‰ë™ ì¡°ì–¸ (ì˜ˆ: "ì´ë‹¬ì—ëŠ” ê±´ê°•ê²€ì§„ì„ ë°›ì•„ë³´ì„¸ìš”")

3. **ì–´ì¡°**:
   - ë”°ëœ»í•˜ê³  ê²©ë ¤í•˜ëŠ” í†¤
   - "~í•˜ì„¸ìš”", "~í•´ë³´ì„¸ìš”" ê°™ì€ ì¹œê·¼í•œ ë§íˆ¬
   - ë¶€ì •ì  ë‚´ìš©ë„ í¬ë§ì ìœ¼ë¡œ í‘œí˜„

# ìš”ì²­ì‚¬í•­
ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ì •í™•íˆ ì‘ì„±í•´ì£¼ì„¸ìš”:

{
  "ì¢…í•©ìš´ì„¸": "2025ë…„ ì„ì‚¬ë…„ì€...",
  "ì›”ë³„ìš´ì„¸": {
    "1ì›”": "ì •ì›”ì€...",
    "2ì›”": "2ì›”ì€...",
    "3ì›”": "3ì›”ì€...",
    "4ì›”": "4ì›”ì€...",
    "5ì›”": "5ì›”ì€...",
    "6ì›”": "6ì›”ì€...",
    "7ì›”": "7ì›”ì€...",
    "8ì›”": "8ì›”ì€...",
    "9ì›”": "9ì›”ì€...",
    "10ì›”": "10ì›”ì€...",
    "11ì›”": "11ì›”ì€...",
    "12ì›”": "12ì›”ì€..."
  }
}

**ì¤‘ìš”**: ë°˜ë“œì‹œ ìœ íš¨í•œ JSON í˜•ì‹ìœ¼ë¡œë§Œ ì‘ë‹µí•´ì£¼ì„¸ìš”!`;

  return prompt;
}

module.exports = {
  generateTojeongPrompt
};
```

---

## ğŸ¨ **7. 4ë‹¨ê³„: í”„ë¡ íŠ¸ì—”ë“œ**

### **íŒŒì¼**: `frontend/pages/tojeong.html`

**ì¤‘ìš”**: ê¸°ì¡´ í˜ì´ì§€(`daily-fortune.html`, `compatibility-test.html`)ì™€ **ì™„ì „íˆ ë™ì¼í•œ ìŠ¤íƒ€ì¼** ì‚¬ìš©!

### **í•µì‹¬ ìŠ¤íƒ€ì¼ ê·œì¹™**
```css
.container {
  max-width: 500px;
  width: 100%;
  background: white;
  border-radius: 20px;
  padding: 30px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.3);
}

.back-btn {
  padding: 8px 15px;
  background: #f0f0f0;
  border-radius: 20px;
}

.top-buttons {
  display: flex;
  justify-content: space-between;
  margin-bottom: 20px;
}

/* í°íŠ¸ */
font-family: 'Malgun Gothic', sans-serif;
```

### **HTML êµ¬ì¡°** (ê°„ë‹¨ ë²„ì „)
```html
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>í† ì •ë¹„ê²° - ìš°ë¦¬ì˜ ìš´ì„¸</title>
  <style>
    /* ê¸°ì¡´ í˜ì´ì§€ì™€ ë™ì¼í•œ ìŠ¤íƒ€ì¼ ë³µì‚¬ */
  </style>
</head>
<body>
  <div class="container">
    <!-- ìƒë‹¨ ë²„íŠ¼ -->
    <div class="top-buttons">
      <a href="../index.html" class="back-btn">â† í™ˆìœ¼ë¡œ</a>
    </div>
    
    <!-- í—¤ë” -->
    <div class="header">
      <h1>ğŸ“¿ í† ì •ë¹„ê²°</h1>
      <p>í† ì • ì´ì§€í•¨ì˜ 144ê´˜ë¡œ ë³´ëŠ” í•œ í•´ ìš´ì„¸</p>
    </div>
    
    <!-- ì…ë ¥ í¼ -->
    <div id="inputSection" class="input-section">
      <!-- ìƒë…„ì›”ì¼ ì…ë ¥ -->
      <!-- ì–‘ë ¥/ìŒë ¥ ì„ íƒ -->
      <!-- ì—°ë„ ì„ íƒ -->
      <button onclick="getTojeong()">í† ì •ë¹„ê²° ë³´ê¸°</button>
    </div>
    
    <!-- ë¡œë”© -->
    <div id="loading" class="hidden">
      <div class="spinner"></div>
      <p>í† ì • ì´ì§€í•¨ì˜ ì§€í˜œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
    </div>
    
    <!-- ê²°ê³¼ í™”ë©´ -->
    <div id="result" class="hidden">
      <!-- ì—°ë„ ì •ë³´ -->
      <!-- ê´˜ ì •ë³´ -->
      <!-- ì¢…í•© ìš´ì„¸ -->
      <!-- 12ê°œì›” ì¹´ë“œ -->
    </div>
  </div>
  
  <script>
    async function getTojeong() {
      // API í˜¸ì¶œ
      const response = await fetch('http://localhost:3000/api/tojeong', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ year, month, day, isLunar, targetYear })
      });
      
      const data = await response.json();
      // ê²°ê³¼ í‘œì‹œ
    }
  </script>
</body>
</html>
```

---

## ğŸš€ **8. 5ë‹¨ê³„: ì„œë²„ API**

### **íŒŒì¼**: `server.js` (ì¶”ê°€)

```javascript
// í† ì •ë¹„ê²° API
app.post('/api/tojeong', async (req, res) => {
  try {
    const { year, month, day, isLunar, targetYear } = req.body;
    
    console.log('í† ì •ë¹„ê²° ìš”ì²­:', { year, month, day, isLunar, targetYear });
    
    // 1. ì—”ì§„ ê³„ì‚°
    const { calculateTojeong } = require('./engines/core/tojeong-engine');
    const tojeongData = calculateTojeong(
      { year, month, day, isLunar },
      targetYear
    );
    
    if (!tojeongData.success) {
      return res.status(400).json({ 
        success: false,
        error: tojeongData.error || 'í† ì •ë¹„ê²° ê³„ì‚° ì‹¤íŒ¨' 
      });
    }
    
    // 2. í”„ë¡¬í”„íŠ¸ ìƒì„±
    const { generateTojeongPrompt } = require('./engines/prompts/tojeong-prompt');
    const prompt = generateTojeongPrompt(tojeongData);
    
    // 3. Claude API í˜¸ì¶œ
    console.log('Claude API í˜¸ì¶œ ì¤‘...');
    const message = await anthropic.messages.create({
      model: 'claude-3-haiku-20240307',
      max_tokens: 5000,  // 12ê°œì›” + ì¢…í•© = ë§ì€ í† í°
      messages: [{
        role: 'user',
        content: prompt
      }]
    });
    
    // 4. ì‘ë‹µ íŒŒì‹±
    const responseText = message.content[0].text;
    console.log('Claude ì‘ë‹µ:', responseText.substring(0, 200) + '...');
    
    const jsonMatch = responseText.match(/\{[\s\S]*\}/);
    let fortuneResult;
    
    if (jsonMatch) {
      fortuneResult = JSON.parse(jsonMatch[0]);
    } else {
      fortuneResult = { 
        ì¢…í•©ìš´ì„¸: responseText,
        ì›”ë³„ìš´ì„¸: {}
      };
    }
    
    // 5. ê²°ê³¼ ë°˜í™˜
    res.json({
      success: true,
      year: tojeongData.year,
      yearGanzi: tojeongData.yearGanzi,
      age: tojeongData.age,
      mainGua: tojeongData.mainGua,
      monthlyFortune: tojeongData.monthlyFortune,
      fortune: fortuneResult,
      cost: (
        message.usage.input_tokens / 1000 * 0.00025 + 
        message.usage.output_tokens / 1000 * 0.00125
      ).toFixed(6)
    });
    
    console.log('í† ì •ë¹„ê²° ìƒì„± ì™„ë£Œ!');
    
  } catch (error) {
    console.error('í† ì •ë¹„ê²° ì˜¤ë¥˜:', error);
    res.status(500).json({ 
      success: false,
      error: error.message 
    });
  }
});
```

---

## âš¡ **9. ì¦‰ì‹œ ì‹œì‘ ê°€ì´ë“œ**

### **ìƒˆ Claude ì°½ì—ì„œ ì‹œì‘í•  ë•Œ**

#### **Step 1: í˜„ì¬ ìœ„ì¹˜ í™•ì¸**
```bash
cd C:\xampp\htdocs\mysite\ìš´ì„¸í”Œë«í¼
```

#### **Step 2: 1ë‹¨ê³„ë¶€í„° ì‹œì‘**
```
"144ê´˜ ë°ì´í„° ìƒì„±ë¶€í„° ì‹œì‘í•©ë‹ˆë‹¤"
```

#### **Step 3: ìˆœì„œëŒ€ë¡œ ì§„í–‰**
1. âœ… 144ê´˜ ë°ì´í„° ìƒì„± (`engines/data/tojeong-gua-144.json`)
2. âœ… ì—”ì§„ êµ¬í˜„ (`engines/core/tojeong-engine.js`)
3. âœ… í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸° (`engines/prompts/tojeong-prompt.js`)
4. âœ… í”„ë¡ íŠ¸ì—”ë“œ (`frontend/pages/tojeong.html`)
5. âœ… ì„œë²„ API (`server.js` ìˆ˜ì •)
6. âœ… í…ŒìŠ¤íŠ¸

---

## ğŸ“‹ **10. ì¤‘ìš” ì°¸ê³ ì‚¬í•­**

### **Claude Haiku ì‚¬ìš© ê·œì¹™**
- âœ… ìì—°ì–´ ë²ˆì—­ë§Œ ì‹œí‚´
- âŒ ê³„ì‚° ì ˆëŒ€ ì•ˆ ì‹œí‚´
- âœ… JSON í˜•ì‹ ì‘ë‹µ ìš”ì²­
- âœ… max_tokens: 5000 (12ê°œì›”ì´ë¼ ë§ì´ í•„ìš”)

### **ìŠ¤íƒ€ì¼ ì¼ê´€ì„±**
- ê¸°ì¡´ í˜ì´ì§€ ìŠ¤íƒ€ì¼ **ë°˜ë“œì‹œ ë³µì‚¬**
- 500px ì»¨í…Œì´ë„ˆ
- 20px ë‘¥ê·¼ ëª¨ì„œë¦¬
- Malgun Gothic í°íŠ¸

### **í…ŒìŠ¤íŠ¸ ë°©ë²•**
```bash
# ì„œë²„ ì‹œì‘
node server.js

# ë¸Œë¼ìš°ì €ì—ì„œ
http://localhost:3000/pages/tojeong.html
```

---

## ğŸ¯ **ë‹¤ìŒ ì‘ì—… ëª…ë ¹ì–´**

ìƒˆ Claude ì°½ì—ì„œ ë‹¤ìŒì²˜ëŸ¼ ì‹œì‘í•˜ì„¸ìš”:

```
"í† ì •ë¹„ê²° êµ¬í˜„ì„ ì‹œì‘í•©ë‹ˆë‹¤. 
C:\xampp\htdocs\mysite\ìš´ì„¸í”Œë«í¼\docs\í† ì •ë¹„ê²°_ì™„ì „_êµ¬í˜„_ê°€ì´ë“œ.md 
ë¬¸ì„œë¥¼ ì½ê³  1ë‹¨ê³„ 144ê´˜ ë°ì´í„° ìƒì„±ë¶€í„° ì‹œì‘í•´ì£¼ì„¸ìš”."
```

---

**ğŸŠ ì´ ë¬¸ì„œ í•˜ë‚˜ë©´ ìƒˆ ì°½ì—ì„œ ì¦‰ì‹œ ì‹œì‘ ê°€ëŠ¥í•©ë‹ˆë‹¤!**
