<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ë¡œë˜ ë²ˆí˜¸ ìƒì„±ê¸° - ìš°ë¦¬ì˜ ìš´ì„¸</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Malgun Gothic', sans-serif;
      background: #ffffff;
      min-height: 100vh;
      padding: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .container {
      max-width: 500px;
      width: 100%;
      background: white;
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }

    .header {
      text-align: center;
      margin-bottom: 30px;
    }

    .header h1 {
      font-size: 28px;
      color: #333;
      margin-bottom: 10px;
    }

    .header p {
      color: #666;
      font-size: 14px;
    }

    .back-btn {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      padding: 8px 15px;
      background: #f0f0f0;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      font-size: 14px;
      text-decoration: none;
      color: #333;
    }

    .back-btn:hover {
      background: #e0e0e0;
    }

    .top-buttons {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      flex-wrap: wrap;
      gap: 10px;
    }

    .header-buttons {
      display: flex;
      gap: 8px;
    }

    .top-btn {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      padding: 8px 15px;
      background: white;
      border: 2px solid #ddd;
      border-radius: 20px;
      cursor: pointer;
      font-size: 14px;
      color: #333;
    }

    .top-btn:hover {
      background: #f8f8f8;
      border-color: #667eea;
    }

    .user-info-display {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      text-align: center;
      font-size: 14px;
      color: #666;
    }

    .generate-btn {
      width: 100%;
      padding: 18px;
      background: #ff4757;
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      margin-bottom: 30px;
      transition: all 0.3s;
      box-shadow: 0 4px 15px rgba(255, 71, 87, 0.3);
    }

    .generate-btn:hover {
      background: #ff3838;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(255, 71, 87, 0.4);
    }

    .generate-btn:active {
      transform: translateY(0);
    }

    .result-container {
      display: none;
      animation: fadeIn 0.5s;
    }

    .result-container.show {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .lotto-balls {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin-bottom: 30px;
    }

    .lotto-set {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 12px;
      animation: fadeIn 0.5s;
      position: relative;
    }

    .lotto-set.recommended {
      background: linear-gradient(135deg, #fff9e6 0%, #ffe8b3 100%);
      border: 2px solid #ffd700;
      box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
    }

    .recommend-badge {
      position: absolute;
      top: -10px;
      left: 15px;
      background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
      color: #8B4513;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: bold;
      box-shadow: 0 2px 8px rgba(255, 215, 0, 0.4);
      border: 1px solid #ffed4e;
      z-index: 2;
    }

    /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
    }

    .modal.active {
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background: white;
      border-radius: 15px;
      padding: 30px;
      width: 90%;
      max-width: 400px;
      position: relative;
      max-height: 90vh;
      overflow-y: auto;
    }

    .modal-close {
      position: absolute;
      top: 15px;
      right: 15px;
      font-size: 28px;
      cursor: pointer;
      color: #999;
    }

    .modal-title {
      font-size: 18px;
      margin-bottom: 20px;
      color: #333;
    }

    .form-group {
      margin-bottom: 15px;
    }

    .form-label {
      display: block;
      margin-bottom: 8px;
      color: #666;
      font-size: 14px;
    }

    .form-select,
    .form-input {
      width: 100%;
      padding: 12px;
      border: 2px solid #f0f0f0;
      border-radius: 8px;
      font-size: 16px;
    }

    .date-inputs {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 10px;
    }

    .submit-btn {
      width: 100%;
      padding: 15px;
      background: #ff6b6b;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      margin-top: 20px;
    }

    .submit-btn:hover {
      background: #ff5252;
    }

    .set-label {
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 18px;
      flex-shrink: 0;
    }

    .balls-row {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      flex: 1;
      justify-content: center;
    }

    .lotto-ball {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      font-weight: bold;
      color: white;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      animation: popIn 0.5s ease-out;
    }

    @keyframes popIn {
      0% { transform: scale(0); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }

    .lotto-ball:nth-child(1) { background: #ffd700; }
    .lotto-ball:nth-child(2) { background: #4169e1; }
    .lotto-ball:nth-child(3) { background: #ff6347; }
    .lotto-ball:nth-child(4) { background: #808080; }
    .lotto-ball:nth-child(5) { background: #32cd32; }
    .lotto-ball:nth-child(6) { background: #ff1493; }

    .loading-container {
      text-align: center;
      padding: 40px 20px;
    }

    .loading-message {
      font-size: 18px;
      color: #ff4757;
      font-weight: bold;
      margin-bottom: 30px;
      animation: pulse 1.5s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .slot-machine {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .slot-row {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 12px;
    }

    .slot-label {
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 18px;
      flex-shrink: 0;
    }

    .slot-numbers {
      display: flex;
      gap: 8px;
      flex: 1;
      justify-content: center;
    }

    .slot-number {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      font-weight: bold;
      color: white;
      background: #ddd;
      animation: slotSpin 0.1s infinite;
    }

    @keyframes slotSpin {
      0% { transform: translateY(-5px); }
      50% { transform: translateY(5px); }
      100% { transform: translateY(-5px); }
    }

    .slot-number.stopping {
      animation: slotStop 0.5s ease-out forwards;
    }

    @keyframes slotStop {
      0% { transform: translateY(5px); }
      50% { transform: scale(1.2); }
      100% { transform: translateY(0) scale(1); }
    }

    .fortune-message {
      text-align: center;
      padding: 20px;
      background: #fff9e6;
      border-radius: 12px;
      margin-bottom: 20px;
    }

    .fortune-message h3 {
      color: #f39c12;
      margin-bottom: 10px;
      font-size: 20px;
    }

    .fortune-message p {
      color: #666;
      line-height: 1.6;
    }

    .action-buttons {
      display: flex;
      gap: 10px;
    }

    .action-btn {
      flex: 1;
      padding: 12px;
      border: 2px solid #667eea;
      background: white;
      color: #667eea;
      border-radius: 10px;
      font-size: 14px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
    }

    .action-btn:hover {
      background: #667eea;
      color: white;
    }

    @media (max-width: 480px) {
      body {
        padding: 5px;
      }

      .container {
        padding: 15px;
        border-radius: 15px;
      }

      .header h1 {
        font-size: 20px;
      }

      .header p {
        font-size: 12px;
      }

      .generate-btn {
        padding: 15px;
        font-size: 16px;
      }

      .lotto-set {
        gap: 6px;
        padding: 10px;
      }

      .set-label {
        width: 30px;
        height: 30px;
        font-size: 14px;
      }

      .balls-row {
        gap: 5px;
      }

      .lotto-ball {
        width: 35px;
        height: 35px;
        font-size: 14px;
      }

      .action-buttons {
        flex-direction: column;
        gap: 8px;
      }

      .action-btn {
        padding: 12px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="top-buttons">
      <a href="../index.html" class="back-btn">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
        ë’¤ë¡œê°€ê¸°
      </a>
      <div class="header-buttons">
        <button class="top-btn" onclick="openModal()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
          </svg>
          ì‚¬ì£¼ë³€ê²½
        </button>
        <button class="top-btn" onclick="shareContent()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="18" cy="5" r="3"/>
            <circle cx="6" cy="12" r="3"/>
            <circle cx="18" cy="19" r="3"/>
            <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/>
            <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/>
          </svg>
          ê³µìœ í•˜ê¸°
        </button>
      </div>
    </div>

    <div class="header">
      <h1>ë¡œë˜ ë²ˆí˜¸ ìƒì„±ê¸°</h1>
      <p>ë‹¹ì‹ ì˜ ìƒë…„ì›”ì¼ë¡œ í–‰ìš´ì˜ ë²ˆí˜¸ë¥¼ ë§Œë“¤ì–´ë“œë¦½ë‹ˆë‹¤</p>
    </div>

    <div class="user-info-display" id="userInfoDisplay">
      ì‚¬ì£¼ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...
    </div>

    <button class="generate-btn" onclick="generateLotto()">
      í–‰ìš´ì˜ ë²ˆí˜¸ ìƒì„±í•˜ê¸°
    </button>

    <div class="result-container" id="resultContainer">
      <div class="lotto-balls" id="lottoBalls"></div>
      
      <div class="fortune-message">
        <h3>ë‹¹ì‹ ì˜ í–‰ìš´ì˜ ë²ˆí˜¸</h3>
        <p id="fortuneMessage">ì´ ë²ˆí˜¸ë“¤ì€ ë‹¹ì‹ ì˜ ìƒë…„ì›”ì¼ ì—ë„ˆì§€ë¥¼ ë‹´ê³  ìˆìŠµë‹ˆë‹¤. í–‰ìš´ì„ ë¹•ë‹ˆë‹¤!</p>
      </div>

      <div class="action-buttons">
        <button class="action-btn" onclick="generateLotto()">ë‹¤ì‹œ ìƒì„±</button>
        <button class="action-btn" onclick="copyNumbers()">ë²ˆí˜¸ ë³µì‚¬</button>
      </div>
    </div>

    <!-- í˜ì´ì§€ í•˜ë‹¨ ë©´ì±…ì¡°í•­ -->
    <div style="margin-top: 40px; padding: 20px; background: #f8f9fa; border-radius: 10px; border-top: 2px solid #e9ecef;">
      <p style="font-size: 12px; color: #999; line-height: 1.8; margin-bottom: 10px;">
        âš ï¸ <strong>ë©´ì±…ì¡°í•­</strong>
      </p>
      <p style="font-size: 11px; color: #666; line-height: 1.8; text-align: justify;">
        ë³¸ ì„œë¹„ìŠ¤ì—ì„œ ì œê³µí•˜ëŠ” ìš´ì„¸, ì‚¬ì£¼, ë³„ìë¦¬ ë“±ì˜ ì½˜í…ì¸ ëŠ” <strong>ì—”í„°í…Œì¸ë¨¼íŠ¸ ë° ì°¸ê³  ëª©ì </strong>ìœ¼ë¡œë§Œ ì œê³µë˜ë©°, 
        ì–´ë– í•œ ê³¼í•™ì Â·ì˜í•™ì Â·ë²•ì  ê·¼ê±°ë‚˜ ë³´ì¦ì„ ì œê³µí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. 
        ë³¸ ì„œë¹„ìŠ¤ëŠ” ì¿ íŒ¡íŒŒíŠ¸ë„ˆìŠ¤ í™œë™ì˜ ì¼í™˜ìœ¼ë¡œ ì¼ì •ì•¡ì˜ ìˆ˜ìˆ˜ë£Œë¥¼ ì œê³µë°›ìŠµë‹ˆë‹¤. 
        ë³¸ ì„œë¹„ìŠ¤ì˜ ë‚´ìš©ì€ <strong>ê°œì¸ì˜ íŒë‹¨ì´ë‚˜ ì˜ì‚¬ê²°ì •ì˜ ìœ ì¼í•œ ê·¼ê±°ë¡œ ì‚¬ìš©ë˜ì–´ì„œëŠ” ì•ˆ ë˜ë©°</strong>, 
        ì¤‘ìš”í•œ ê²°ì •ì€ ë°˜ë“œì‹œ ì „ë¬¸ê°€ì™€ ìƒë‹´í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤. 
        ë³¸ ì„œë¹„ìŠ¤ ì´ìš©ìœ¼ë¡œ ì¸í•´ ë°œìƒí•˜ëŠ” ì–´ë– í•œ ì§ì ‘ì Â·ê°„ì ‘ì  ì†í•´ì— ëŒ€í•´ì„œë„ 
        ë‹¹ì‚¬ëŠ” ë²•ì  ì±…ì„ì„ ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.
      </p>
      <p style="font-size: 10px; color: #999; margin-top: 10px; text-align: center;">
        Â© 2025 ìš°ë¦¬ì˜ ìš´ì„¸. All rights reserved.
      </p>
    </div>
  </div>

  <!-- ì‚¬ì£¼ ì…ë ¥ ëª¨ë‹¬ -->
  <div class="modal" id="sajuModal">
    <div class="modal-content">
      <span class="modal-close" onclick="closeModal()">&times;</span>
      <h2 class="modal-title">ì˜¤ëŠ˜ì˜ ìš´ì„¸ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ì„œëŠ”<br>ì•„ë˜ ì •ë³´ê°€ í•„ìš”í•©ë‹ˆë‹¤.</h2>

      <div class="form-group">
        <label class="form-label">ì„±ë³„</label>
        <select class="form-select" id="gender">
          <option value="ë‚¨ì„±">ë‚¨ì„±</option>
          <option value="ì—¬ì„±">ì—¬ì„±</option>
        </select>
      </div>

      <div class="form-group">
        <label class="form-label">ì–‘ë ¥/ìŒë ¥</label>
        <select class="form-select" id="calendarType">
          <option value="ì–‘ë ¥/ìŒë ¥">ì–‘ë ¥/ìŒë ¥</option>
          <option value="ìŒë ¥(í‰ë‹¬)">ìŒë ¥(í‰ë‹¬)</option>
          <option value="ìŒë ¥(ìœ¤ë‹¬)">ìŒë ¥(ìœ¤ë‹¬)</option>
          <option value="ì–‘ë ¥">ì–‘ë ¥</option>
        </select>
      </div>

      <div class="form-group">
        <label class="form-label">ìƒë…„ì›”ì¼</label>
        <div class="date-inputs">
          <select class="form-select" id="year"></select>
          <select class="form-select" id="month"></select>
          <select class="form-select" id="day"></select>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">íƒœì–´ë‚œ ì‹œê°„</label>
        <select class="form-select" id="birthTime">
          <option value="íƒœì–´ë‚œ ì‹œê°„">íƒœì–´ë‚œ ì‹œê°„</option>
          <option value="ì‹œê°„ ëª¨ë¦„">ì‹œê°„ ëª¨ë¦„</option>
          <option value="å­(00:00~01:30)">å­(00:00~01:30)</option>
          <option value="ä¸‘(01:31~03:30)">ä¸‘(01:31~03:30)</option>
          <option value="å¯…(03:31~05:30)">å¯…(03:31~05:30)</option>
          <option value="å¯(05:31~07:30)">å¯(05:31~07:30)</option>
          <option value="è¾°(07:31~09:30)">è¾°(07:31~09:30)</option>
          <option value="å·³(09:31~11:30)">å·³(09:31~11:30)</option>
          <option value="åˆ(11:31~13:30)">åˆ(11:31~13:30)</option>
          <option value="æœª(13:31~15:30)">æœª(13:31~15:30)</option>
          <option value="ç”³(15:31~17:30)">ç”³(15:31~17:30)</option>
          <option value="é…‰(17:31~19:30)">é…‰(17:31~19:30)</option>
          <option value="æˆŒ(19:31~21:30)">æˆŒ(19:31~21:30)</option>
          <option value="äº¥(21:31~23:30)">äº¥(21:31~23:30)</option>
          <option value="å­(23:31~23:59)">å­(23:31~23:59)</option>
        </select>
      </div>

      <button class="submit-btn" onclick="saveSaju()">ì €ì¥í•˜ê¸°</button>
    </div>
  </div>

  <script>
    let currentNumbers = [];
    
    // localStorageì—ì„œ ì‚¬ì£¼ ì •ë³´ ê°€ì ¸ì˜¤ê¸° (ì—†ìœ¼ë©´ ê¸°ë³¸ê°’)
    let savedData = JSON.parse(localStorage.getItem('fortuneUserData')) || {
      gender: 'ë‚¨ì„±',
      calendarType: 'ìŒë ¥(í‰ë‹¬)',
      year: '1984',
      month: '7',
      day: '7',
      birthTime: 'æœª(13:31~15:30)'
    };

    function loadUserInfo() {
      const savedDataFromStorage = localStorage.getItem('fortuneUserData');
      if (savedDataFromStorage) {
        const data = JSON.parse(savedDataFromStorage);
        const display = `${data.gender} ${data.year}. ${data.month}. ${data.day} (${data.calendarType}) íƒœì–´ë‚œ ì‹œê°„ : ${data.birthTime}`;
        document.getElementById('userInfoDisplay').textContent = display;
        return data;
      } else {
        document.getElementById('userInfoDisplay').textContent = 'ì‚¬ì£¼ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤. ë©”ì¸ í˜ì´ì§€ì—ì„œ ì…ë ¥í•´ì£¼ì„¸ìš”.';
        return null;
      }
    }

    function hashCode(str) {
      let hash = 0;
      for (let i = 0; i < str.length; i++) {
        const char = str.charCodeAt(i);
        hash = ((hash << 5) - hash) + char;
        hash = hash & hash;
      }
      return Math.abs(hash);
    }

    function generateLottoNumbers(birthDate, setNumber) {
      const timestamp = Date.now() + setNumber * 1000;
      const seed = hashCode(birthDate + timestamp);
      const numbers = [];
      let random = seed;
      
      while (numbers.length < 6) {
        random = (random * 1103515245 + 12345) & 0x7fffffff;
        const num = (random % 45) + 1;
        
        if (!numbers.includes(num)) {
          numbers.push(num);
        }
      }
      
      return numbers.sort((a, b) => a - b);
    }

    function generateMultipleSets(birthDate, count = 5) {
      const sets = [];
      for (let i = 0; i < count; i++) {
        sets.push(generateLottoNumbers(birthDate, i));
      }
      return sets;
    }

    function generateLottoCore() {
      const userData = loadUserInfo();
      if (!userData) {
        alert('ì‚¬ì£¼ ì •ë³´ë¥¼ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”.');
        openModal();
        return;
      }

      const birthDate = `${userData.year}${userData.month}${userData.day}`;
      currentNumbers = generateMultipleSets(birthDate, 5);

      const randomRecommend = Math.floor(Math.random() * 5);

      const ballsContainer = document.getElementById('lottoBalls');
      ballsContainer.innerHTML = '';

      // ë¡œë”© ë©”ì‹œì§€ í‘œì‹œ
      const loadingDiv = document.createElement('div');
      loadingDiv.className = 'loading-container';
      loadingDiv.innerHTML = '<div class="loading-message">í–‰ìš´ì˜ ë²ˆí˜¸ë¥¼ ì°¾ëŠ” ì¤‘...</div>';
      
      // ìŠ¬ë¡¯ë¨¸ì‹  ìƒì„±
      const slotMachine = document.createElement('div');
      slotMachine.className = 'slot-machine';
      
      for (let i = 0; i < 5; i++) {
        const slotRow = document.createElement('div');
        slotRow.className = 'slot-row';
        
        const label = document.createElement('div');
        label.className = 'slot-label';
        label.textContent = String.fromCharCode(65 + i);
        slotRow.appendChild(label);
        
        const numbersDiv = document.createElement('div');
        numbersDiv.className = 'slot-numbers';
        
        for (let j = 0; j < 6; j++) {
          const slotNum = document.createElement('div');
          slotNum.className = 'slot-number';
          slotNum.textContent = Math.floor(Math.random() * 45) + 1;
          slotNum.style.background = getRandomColor();
          numbersDiv.appendChild(slotNum);
        }
        
        slotRow.appendChild(numbersDiv);
        slotMachine.appendChild(slotRow);
      }
      
      loadingDiv.appendChild(slotMachine);
      ballsContainer.appendChild(loadingDiv);
      document.getElementById('resultContainer').classList.add('show');

      // ìˆ«ì ë¹ ë¥´ê²Œ ëŒë¦¬ê¸°
      const spinIntervals = [];
      const allSlotNumbers = document.querySelectorAll('.slot-number');
      
      allSlotNumbers.forEach((slot) => {
        const interval = setInterval(() => {
          slot.textContent = Math.floor(Math.random() * 45) + 1;
          slot.style.background = getRandomColor();
        }, 100);
        spinIntervals.push(interval);
      });

      // 2.5ì´ˆ í›„ ë©ˆì¶”ê¸° ì‹œì‘
      setTimeout(() => {
        spinIntervals.forEach(interval => clearInterval(interval));
        
        // í•˜ë‚˜ì”© ë©ˆì¶”ë©´ì„œ ì‹¤ì œ ë²ˆí˜¸ í‘œì‹œ
        let slotIndex = 0;
        const stopInterval = setInterval(() => {
          if (slotIndex >= allSlotNumbers.length) {
            clearInterval(stopInterval);
            
            // ìµœì¢… ê²°ê³¼ í‘œì‹œ
            setTimeout(() => {
              showFinalResult(randomRecommend);
            }, 500);
            return;
          }
          
          const rowIndex = Math.floor(slotIndex / 6);
          const numIndex = slotIndex % 6;
          const slot = allSlotNumbers[slotIndex];
          
          slot.textContent = currentNumbers[rowIndex][numIndex];
          slot.style.background = getBallColor(numIndex);
          slot.classList.add('stopping');
          
          slotIndex++;
        }, 80);
      }, 2500);
    }

    function showFinalResult(randomRecommend) {
      const ballsContainer = document.getElementById('lottoBalls');
      ballsContainer.innerHTML = '';

      currentNumbers.forEach((setNumbers, setIndex) => {
        const setDiv = document.createElement('div');
        setDiv.className = 'lotto-set';
        
        if (setIndex === randomRecommend) {
          setDiv.classList.add('recommended');
          
          const badge = document.createElement('div');
          badge.className = 'recommend-badge';
          badge.textContent = 'ì¶”ì²œ';
          setDiv.appendChild(badge);
        }
        
        const setLabel = document.createElement('div');
        setLabel.className = 'set-label';
        setLabel.textContent = `${String.fromCharCode(65 + setIndex)}`;
        setDiv.appendChild(setLabel);
        
        const ballsRow = document.createElement('div');
        ballsRow.className = 'balls-row';
        
        setNumbers.forEach((num, numIndex) => {
          const ball = document.createElement('div');
          ball.className = 'lotto-ball';
          ball.textContent = num;
          ballsRow.appendChild(ball);
        });
        
        setDiv.appendChild(ballsRow);
        ballsContainer.appendChild(setDiv);
      });
    }

    function getBallColor(index) {
      const colors = ['#ffd700', '#4169e1', '#ff6347', '#808080', '#32cd32', '#ff1493'];
      return colors[index];
    }

    function getRandomColor() {
      const colors = ['#ffd700', '#4169e1', '#ff6347', '#808080', '#32cd32', '#ff1493'];
      return colors[Math.floor(Math.random() * colors.length)];
    }

    async function generateLotto() {
      checkTicketAndExecute(generateLottoCore);
    }

    // ëª¨ë‹¬ ê´€ë ¨ í•¨ìˆ˜
    function initializeSelects() {
      const yearSelect = document.getElementById('year');
      for (let y = 1940; y <= 2025; y++) {
        const opt = document.createElement('option');
        opt.value = y + 'ë…„';
        opt.textContent = y + 'ë…„';
        yearSelect.appendChild(opt);
      }

      const monthSelect = document.getElementById('month');
      for (let m = 1; m <= 12; m++) {
        const opt = document.createElement('option');
        opt.value = m + 'ì›”';
        opt.textContent = m + 'ì›”';
        monthSelect.appendChild(opt);
      }

      const daySelect = document.getElementById('day');
      for (let d = 1; d <= 31; d++) {
        const opt = document.createElement('option');
        opt.value = d + 'ì¼';
        opt.textContent = d + 'ì¼';
        daySelect.appendChild(opt);
      }
    }

    function openModal() {
      // localStorageì—ì„œ ìµœì‹  ë°ì´í„° ë‹¤ì‹œ ë¡œë“œ
      const savedDataFromStorage = localStorage.getItem('fortuneUserData');
      if (savedDataFromStorage) {
        const data = JSON.parse(savedDataFromStorage);
        document.getElementById('gender').value = data.gender;
        document.getElementById('calendarType').value = data.calendarType;
        document.getElementById('year').value = data.year + 'ë…„';
        document.getElementById('month').value = data.month + 'ì›”';
        document.getElementById('day').value = data.day + 'ì¼';
        document.getElementById('birthTime').value = data.birthTime;
      } else {
        document.getElementById('gender').value = savedData.gender;
        document.getElementById('calendarType').value = savedData.calendarType;
        document.getElementById('year').value = savedData.year + 'ë…„';
        document.getElementById('month').value = savedData.month + 'ì›”';
        document.getElementById('day').value = savedData.day + 'ì¼';
        document.getElementById('birthTime').value = savedData.birthTime;
      }
      
      document.getElementById('sajuModal').classList.add('active');
    }

    function closeModal() {
      document.getElementById('sajuModal').classList.remove('active');
    }

    function saveSaju() {
      // ëª¨ë‹¬ ì…ë ¥ê°’ ê°€ì ¸ì˜¤ê¸°
      savedData.gender = document.getElementById('gender').value;
      savedData.calendarType = document.getElementById('calendarType').value;
      savedData.year = document.getElementById('year').value.replace('ë…„', '');
      savedData.month = document.getElementById('month').value.replace('ì›”', '');
      savedData.day = document.getElementById('day').value.replace('ì¼', '');
      savedData.birthTime = document.getElementById('birthTime').value;

      // localStorageì— ì €ì¥
      localStorage.setItem('fortuneUserData', JSON.stringify(savedData));

      // í™”ë©´ í‘œì‹œ ì—…ë°ì´íŠ¸
      const userInfoText = `${savedData.gender} ${savedData.year}. ${savedData.month}. ${savedData.day} (${savedData.calendarType}) íƒœì–´ë‚œ ì‹œê°„ : ${savedData.birthTime}`;
      document.getElementById('userInfoDisplay').textContent = userInfoText;

      alert('ì‚¬ì£¼ ì •ë³´ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!\n\në³€ê²½ëœ ì •ë³´ë¡œ ë¡œë˜ ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ìƒì„±í•´ì£¼ì„¸ìš”.');
      closeModal();
      
      // ê²°ê³¼ê°€ ìˆë‹¤ë©´ ì´ˆê¸°í™” (ìƒˆë¡œ ì¡°íšŒ í•„ìš”)
      const resultDiv = document.getElementById('result');
      if (resultDiv && resultDiv.innerHTML.includes('set-container')) {
        resultDiv.innerHTML = '';
        document.querySelector('.generate-btn').style.display = 'block';
      }
    }

    function copyNumbers() {
      let text = '';
      currentNumbers.forEach((setNumbers, index) => {
        const label = String.fromCharCode(65 + index);
        text += `${label}: ${setNumbers.join(', ')}\n`;
      });
      
      navigator.clipboard.writeText(text).then(() => {
        alert('5ê°œ ì„¸íŠ¸ ë²ˆí˜¸ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!\n\n' + text);
      }).catch(() => {
        alert('ë²ˆí˜¸:\n' + text);
      });
    }

    function shareContent() {
      if (navigator.share) {
        navigator.share({
          title: 'ë¡œë˜ ë²ˆí˜¸ ìƒì„±ê¸° - ìš°ë¦¬ì˜ ìš´ì„¸',
          text: 'ë‚˜ì˜ í–‰ìš´ì˜ ë¡œë˜ ë²ˆí˜¸ë¥¼ í™•ì¸í•˜ì„¸ìš”!',
          url: window.location.href
        }).then(() => {
          console.log('ê³µìœ  ì„±ê³µ');
        }).catch((error) => {
          console.log('ê³µìœ  ì‹¤íŒ¨', error);
          fallbackShare();
        });
      } else {
        fallbackShare();
      }
    }

    function fallbackShare() {
      const url = window.location.href;
      if (navigator.clipboard) {
        navigator.clipboard.writeText(url).then(() => {
          alert('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!\nì›í•˜ëŠ” ê³³ì— ë¶™ì—¬ë„£ê¸° í•˜ì„¸ìš”.');
        }).catch(() => {
          alert('ë§í¬: ' + url);
        });
      } else {
        alert('ë§í¬: ' + url);
      }
    }

    window.onload = function() {
      initializeSelects();
      loadUserInfo();
    }

    // í˜ì´ì§€ í¬ì»¤ìŠ¤ ì‹œ (ë‹¤ë¥¸ í˜ì´ì§€ì—ì„œ ëŒì•„ì˜¤ë©´) localStorage ë‹¤ì‹œ í™•ì¸
    window.addEventListener('focus', function() {
      loadUserInfo();
    });

    // pageshow ì´ë²¤íŠ¸ë¡œ ë¸Œë¼ìš°ì € ë’¤ë¡œê°€ê¸° ê°ì§€
    window.addEventListener('pageshow', function(event) {
      // ë¸Œë¼ìš°ì € ìºì‹œì—ì„œ í˜ì´ì§€ê°€ ë³µì›ëœ ê²½ìš°
      if (event.persisted) {
        loadUserInfo();
      }
    });
  </script>
</body>
</html>

  <!-- ğŸ“Š ë°©ë¬¸ì ì¶”ì  ì‹œìŠ¤í…œ -->
  <script src="../utils/analytics-tracker.js"></script>

  <!-- ğŸ« ì´ìš©ê¶Œ ì‹œìŠ¤í…œ ìŠ¤í¬ë¦½íŠ¸ -->
  <script src="../utils/ticket-system.js"></script>
  <script src="../components/common/TicketModal.jsx"></script>
  <script src="../utils/ticket-wrapper.js"></script>
  <script>
    // í˜ì´ì§€ ë¡œë“œ ì‹œ ë§ˆìŠ¤í„° ëª¨ë“œ ì²´í¬
    checkMasterModeFromURL();
  </script>
