# 운세 플랫폼 기능 점검 가이드

작성일: 2025-01-05
목적: 새로운 Claude 창에서 다른 기능들을 체계적으로 점검하기 위한 가이드

---

## 0. 점검 전 필수 확인사항

### 읽어야 할 문서 (우선순위 순)
1. `C:\xampp\htdocs\mysite\docs\운세_플랫폼_폴더구조.md`
   - 전체 프로젝트 구조 이해
   
2. `C:\xampp\htdocs\mysite\docs\project_plan.md`
   - 현재 진행 상황 파악
   
3. `C:\xampp\htdocs\mysite\운세플랫폼\docs\CHECKPOINT_현재상황.md`
   - 최신 작업 내역 확인

### 프로젝트 루트 경로
```
C:\xampp\htdocs\mysite\운세플랫폼\
```

---

## 1. 점검 원칙

### 절대 규칙
1. **코드 수정 금지**: 점검만 하고 수정하지 않음
2. **이모지 사용 금지**: 문서와 코드에 이모지 절대 금지
3. **웹검색 필수**: 의심스러운 부분은 반드시 웹검색으로 검증
4. **보고서 작성**: 점검 후 반드시 문서화

### 점검 순서
```
1단계: 시스템 파악
2단계: 파일 구조 분석
3단계: 코드 로직 검증
4단계: 웹검색 검증
5단계: 보고서 작성
```

---

## 2. 점검 프로세스 (단계별 상세)

### 1단계: 시스템 파악

#### 1.1 관련 파일 찾기
```bash
# 엔진 파일 찾기
desktop-commander:list_directory
path: C:\xampp\htdocs\mysite\운세플랫폼\engines\core

# 프론트엔드 파일 찾기
desktop-commander:start_search
pattern: [기능명]
searchType: files
path: C:\xampp\htdocs\mysite\운세플랫폼\frontend\pages
```

#### 1.2 시스템 흐름 파악
```
사용자 입력 (프론트엔드)
    |
    v
API 호출 (server.js)
    |
    v
엔진 계산 (engines/core/)
    |
    v
프롬프트 생성 (engines/prompts/)
    |
    v
Claude API 호출 (선택)
    |
    v
결과 반환
```

---

### 2단계: 파일 구조 분석

#### 2.1 파일 읽기
```javascript
// 메인 엔진 파일
desktop-commander:read_file
path: C:\xampp\htdocs\mysite\운세플랫폼\engines\core\[기능]-engine.js

// 첫 100줄만 읽기
length: 100
```

#### 2.2 파일 분류
```
실제 사용 파일:
- engines/core/[기능]-engine.js
- engines/prompts/[기능]-prompt.js
- frontend/pages/[기능]-test.html

테스트 파일:
- tests/test-[기능]-*.js

중복/불필요 파일:
- 확인 필요
```

#### 2.3 의존성 확인
```javascript
// 어떤 파일을 import 하는지 확인
desktop-commander:start_search
pattern: require.*[기능]
searchType: content
```

---

### 3단계: 코드 로직 검증

#### 3.1 핵심 로직 파악
각 기능별로 다음을 확인:

**공통 체크리스트:**
- [ ] 입력 파라미터가 올바른가?
- [ ] 계산 로직이 정확한가?
- [ ] 에러 처리가 있는가?
- [ ] 결과 형식이 일관적인가?

**기능별 체크리스트:**

##### 별자리 운세
- [ ] 12별자리 계산이 정확한가?
- [ ] 생년월일 -> 별자리 변환 로직
- [ ] 카테고리별 운세 생성

##### 꿈해몽
- [ ] 2,000개 꿈 DB 존재하는가?
- [ ] 검색 알고리즘이 효율적인가?
- [ ] 키워드 매칭 로직

##### 궁합
- [ ] 6가지 궁합 타입 (연인/결혼/가족/친구/동업/직장)
- [ ] 사주 기반 계산인가? 띠 기반인가?
- [ ] 점수 계산 로직

##### 토정비결
- [ ] 144괘 데이터 완전한가?
- [ ] 과수 계산이 정확한가?
- [ ] 6개 카테고리 (전체/금전/애정/건강/가정/여행)

#### 3.2 데이터 검증
```javascript
// 데이터 파일 확인
desktop-commander:read_file
path: C:\xampp\htdocs\mysite\운세플랫폼\engines\data\[데이터파일].json
length: 30  // 샘플만 확인
```

---

### 4단계: 웹검색 검증

#### 4.1 검증이 필요한 경우
- 전통 이론 관련 (사주, 명리학, 역학)
- 계산 공식
- 데이터 정확성
- 의심스러운 로직

#### 4.2 검색 방법
```javascript
web_search
query: [의심스러운 부분] + 정확한 방법
```

**검색 예시:**
```
- "별자리 계산 방법 날짜"
- "토정비결 과수 계산법"
- "꿈해몽 키워드 검색 알고리즘"
- "궁합 점수 계산 전통 방식"
```

#### 4.3 검증 결과 기록
```
문제점 발견 시:
1. 웹검색 결과 스크린샷/인용
2. 현재 코드의 문제점 명확히 기술
3. 수정 방향 제시 (수정은 하지 않음)
```

---

### 5단계: 보고서 작성

#### 5.1 보고서 템플릿
```markdown
# [기능명] 시스템 점검 보고서

점검일: 2025-01-05
점검자: Claude
점검 방식: 코드 분석 + 웹검색 검증 (수정 없음)

---

## 1. 시스템 개요

### 핵심 아키텍처
[입력 -> 처리 -> 출력 흐름도]

### 운영 방식
- 계산 방식: [설명]
- AI 사용 여부: [예/아니오]
- 데이터 의존성: [설명]

---

## 2. 파일별 상세 분석

### 2.1 [파일명1] (메인 엔진)
**강점:**
- [항목1]
- [항목2]

**발견된 문제점:**
- [문제1]: [설명]
  - 현재 코드: [코드 스니펫]
  - 웹검색 결과: [검증 내용]
  - 영향도: [높음/보통/낮음]

### 2.2 [파일명2] (프롬프트/데이터)
[동일 형식]

---

## 3. 강점 요약

### 정확성
- [항목]

### 설계
- [항목]

### 성능
- [항목]

---

## 4. 발견된 문제점 및 개선사항

### 높음 (필수 수정)
**1. [문제명]**
```
현재: [코드]
정확: [올바른 방법]
영향: [설명]
우선순위: 높음
```

### 보통 (권장 수정)
[동일 형식]

### 낮음 (선택사항)
[동일 형식]

---

## 5. 종합 평가

### 점수: X/100

| 항목 | 점수 | 평가 |
|------|------|------|
| 정확성 | /100 | [설명] |
| 설계 | /100 | [설명] |
| 성능 | /100 | [설명] |
| 유지보수 | /100 | [설명] |
| 문서화 | /100 | [설명] |

### 배포 가능 여부
- [가능 / 조건부 가능 / 불가능]

**배포 전 필수 수정:**
1. [항목]
2. [항목]

---

## 6. 권장 사항

### 즉시 조치
1. [항목]

### 향후 개선
1. [항목]

---

## 7. 최종 의견

[종합 의견]

---

점검 완료일: 2025-01-05
다음 점검: [다른 기능명]
```

#### 5.2 보고서 저장 위치
```
C:\xampp\htdocs\mysite\운세플랫폼\docs\[기능명]_INSPECTION_REPORT.md
```

---

## 3. 오늘의 운세 점검 사례 (참고용)

### 진행 과정

**1단계: 파일 파악**
```
발견된 파일:
- engines/core/daily-engine.js
- engines/utils/saju-calculator.js
- engines/utils/ganzi-calculator.js
- engines/utils/element-calculator.js
- engines/data/ganzi-60.json
- engines/prompts/daily-fortune-prompt.js
- frontend/pages/daily-fortune-test.html
```

**2단계: 코드 분석**
```
핵심 로직:
1. 사주 8글자 계산 (년월일시)
2. 오늘의 일진 계산
3. 오행 상생상극 관계
4. 운세 점수 산출
```

**3단계: 문제점 발견**
```
의심 사항:
1. 월주 계산이 월만 보고 계산? (년간 무시?)
2. 시주 계산에 시간 변환 로직 없음?
3. 절기 고려 안 함?
```

**4단계: 웹검색 검증**
```
검색 쿼리:
- "사주 월주 계산 방법 년간 월건법"
- "사주 시주 계산 시간 자시 축시 변환"

결과:
1. 월주는 년간에 따라 5가지 패턴으로 달라짐 (확인됨)
2. 시간은 30분 보정 필요 (한국 표준시) (확인됨)
3. 절기 고려 필요 (확인됨)
```

**5단계: 보고서 작성**
```
결론:
- 점수: 85/100
- 배포: 조건부 가능
- 필수 수정: 월주 계산, 시주 계산
- 권장 수정: 절기 계산
```

---

## 4. 기능별 점검 포인트

### 별자리 운세

**확인 사항:**
1. 별자리 날짜 경계 정확성
   - 물병자리: 1/20-2/18
   - 물고기자리: 2/19-3/20
   - etc.

2. 12별자리 완전성
   - 모든 별자리 데이터 존재?
   - 빠진 별자리 없나?

3. 카테고리별 운세
   - 몇 가지 카테고리?
   - 생성 방식?

**검색 키워드:**
```
- "별자리 날짜 정확한 기간"
- "서양 점성술 별자리 계산"
```

---

### 꿈해몽

**확인 사항:**
1. 꿈 데이터베이스
   - dream-db.json 존재?
   - 2,000개 맞나?
   - 데이터 구조는?

2. 검색 알고리즘
   - 키워드 매칭 방식?
   - 유사도 검색?
   - 성능은?

3. 결과 생성
   - DB 검색만?
   - AI 해석 추가?

**검색 키워드:**
```
- "꿈해몽 키워드 검색 방법"
- "문자열 유사도 검색 알고리즘"
```

---

### 궁합

**확인 사항:**
1. 궁합 타입
   - 6가지 맞나? (연인/결혼/가족/친구/동업/직장)
   - 각 타입별 계산 다른가?

2. 계산 방식
   - 사주 기반? 띠 기반?
   - 오행 상생상극 사용?
   - 점수 계산 로직?

3. 정확성
   - 전통 명리학 이론 맞나?
   - 검증 필요

**검색 키워드:**
```
- "사주 궁합 계산 방법"
- "띠 궁합 점수 산출"
- "오행 상생상극 궁합"
```

---

### 토정비결

**확인 사항:**
1. 144괘 시스템
   - tojeong-gua-144.json 존재?
   - 144개 완전?
   - 과수 계산 정확?

2. 카테고리
   - 6개 맞나? (전체/금전/애정/건강/가정/여행)
   - 각 카테고리별 프롬프트?

3. 생년월일 계산
   - 과수 계산 공식?
   - 12개월 계산?

**검색 키워드:**
```
- "토정비결 과수 계산법"
- "토정비결 144괘"
- "토정비결 정확한 계산 방법"
```

---

## 5. 자주 발생하는 문제 패턴

### 패턴 1: 데이터 불완전
**증상:**
- 12개 중 10개만 있음
- 배열 길이 부족
- null/undefined 많음

**확인 방법:**
```javascript
// JSON 파일 읽고 길이 확인
const data = require('./data.json');
console.log('데이터 개수:', data.length);
```

---

### 패턴 2: 계산 로직 단순화
**증상:**
- 복잡한 이론을 너무 단순하게 구현
- 중요한 변수 무시
- 랜덤 값 사용

**확인 방법:**
- 웹검색으로 정확한 이론 확인
- 코드와 비교

---

### 패턴 3: 에러 처리 부재
**증상:**
- try-catch 없음
- null 체크 없음
- 기본값 없음

**확인 방법:**
```javascript
// 코드에서 찾기
desktop-commander:start_search
pattern: try|catch|throw
searchType: content
```

---

## 6. 점검 시 주의사항

### 해야 할 것
1. 꼼꼼히 읽기 (코드 전체)
2. 의심되면 웹검색
3. 문제점 명확히 기록
4. 보고서 작성

### 하지 말아야 할 것
1. 코드 수정 (점검만!)
2. 추측으로 판단 (검증 필수)
3. 이모지 사용
4. 불완전한 보고서

---

## 7. 체크리스트 (점검 전후)

### 점검 전
- [ ] 필수 문서 3개 읽음
- [ ] 프로젝트 구조 이해
- [ ] 해당 기능 개요 파악

### 점검 중
- [ ] 모든 관련 파일 확인
- [ ] 코드 로직 분석
- [ ] 의심스러운 부분 웹검색
- [ ] 문제점 기록

### 점검 후
- [ ] 보고서 작성 완료
- [ ] 점수 산정
- [ ] 우선순위 정리
- [ ] 다음 점검 대상 선정

---

## 8. 템플릿 파일

### 빠른 점검 시작 템플릿
```markdown
# [기능명] 점검 시작

## 1. 파일 확인
- engines/core/
- engines/data/
- engines/prompts/
- frontend/pages/

## 2. 핵심 로직
- [로직1]
- [로직2]

## 3. 의심 사항
- [의심1]
- [의심2]

## 4. 웹검색 필요
- [검색1]
- [검색2]

## 5. 결과
- 정상: []
- 문제: []
```

---

## 9. 최종 점검 순서 (권장)

```
1. 별자리 운세 (비교적 간단)
   - 날짜 계산만 확인
   
2. 꿈해몽 (DB 검색)
   - 데이터 완전성 확인
   
3. 궁합 (사주 사용)
   - 오늘의 운세 수정 적용됨
   
4. 토정비결 (복잡)
   - 144괘 + 과수 계산
```

---

## 10. 참고 자료

### 프로젝트 문서
```
C:\xampp\htdocs\mysite\docs\운세_플랫폼_폴더구조.md
C:\xampp\htdocs\mysite\docs\project_plan.md
C:\xampp\htdocs\mysite\운세플랫폼\docs\CHECKPOINT_현재상황.md
```

### 점검 결과 문서
```
C:\xampp\htdocs\mysite\운세플랫폼\docs\DAILY_FORTUNE_INSPECTION_REPORT.md (오늘의 운세 - 작성 완료)
C:\xampp\htdocs\mysite\운세플랫폼\docs\DAILY_FORTUNE_FILE_GUIDE.md (파일 정리)
```

---

## 마무리

이 가이드를 따라 각 기능을 체계적으로 점검하면:
1. 정확한 문제점 파악 가능
2. 우선순위 명확화
3. 수정 방향 제시
4. 문서화로 추적 가능

**중요**: 점검만 하고 수정하지 않기!

---

작성자: Claude (2025-01-05)
기반: 오늘의 운세 점검 경험
목적: 새로운 Claude 창에서 다른 기능 점검 시 참고
