/**
 * 토정비결 카테고리별 프롬프트 생성기
 * 
 * 144괘 결과를 카테고리별로 해석하는 프롬프트 제공
 */

/**
 * 카테고리별 프롬프트 생성
 * @param {string} category - 선택한 카테고리 (전체운/금전운/애정운/건강운/가정운/여행운)
 * @param {object} guaData - 144괘 엔진 결과
 * @returns {string} Claude API용 프롬프트
 */
function getTojeongPrompt(category, guaData) {
  const { guaNumber, guaName, guaSymbol, guaDescription, monthly } = guaData;
  
  // 12개월 기본 운세 텍스트
  const monthlyText = Object.keys(monthly)
    .map(month => `- ${month}: "${monthly[month]}"`)
    .join('\n');

  // 카테고리별 프롬프트 템플릿
  const prompts = {
    '전체운': generatePrompt_Total(guaNumber, guaName, guaSymbol, guaDescription, monthlyText),
    '금전운': generatePrompt_Money(guaNumber, guaName, guaSymbol, guaDescription, monthlyText),
    '애정운': generatePrompt_Love(guaNumber, guaName, guaSymbol, guaDescription, monthlyText),
    '건강운': generatePrompt_Health(guaNumber, guaName, guaSymbol, guaDescription, monthlyText),
    '가정운': generatePrompt_Family(guaNumber, guaName, guaSymbol, guaDescription, monthlyText),
    '여행운': generatePrompt_Travel(guaNumber, guaName, guaSymbol, guaDescription, monthlyText)
  };

  return prompts[category] || prompts['전체운'];
}

// ============================================
// 1. 전체운 프롬프트
// ============================================
function generatePrompt_Total(guaNumber, guaName, guaSymbol, guaDescription, monthlyText) {
  return `당신은 토정비결 전문가입니다. 144괘 중 ${guaNumber}번 "${guaName}(${guaSymbol})" 괘가 나왔습니다.

📜 괘의 기본 의미:
${guaDescription}

📅 12개월 기본 운세:
${monthlyText}

🎯 작업 지시:
위 144괘의 의미를 바탕으로 2025년 **전체 종합 운세**를 작성해주세요.

✅ 출력 형식 (JSON):
{
  "yearFortune": "2025년 전체 종합 운세 (200-300자)",
  "monthly": {
    "1월": "1월 종합 운세 (50-80자)",
    "2월": "2월 종합 운세 (50-80자)",
    "3월": "3월 종합 운세 (50-80자)",
    "4월": "4월 종합 운세 (50-80자)",
    "5월": "5월 종합 운세 (50-80자)",
    "6월": "6월 종합 운세 (50-80자)",
    "7월": "7월 종합 운세 (50-80자)",
    "8월": "8월 종합 운세 (50-80자)",
    "9월": "9월 종합 운세 (50-80자)",
    "10월": "10월 종합 운세 (50-80자)",
    "11월": "11월 종합 운세 (50-80자)",
    "12월": "12월 종합 운세 (50-80자)"
  }
}

📌 작성 가이드:
- 144괘의 기본 의미를 유지하면서 현대적으로 재해석
- 전반적인 운의 흐름, 기회, 주의사항 등을 포괄적으로 서술
- 긍정적이면서도 현실적인 조언
- 구체적이고 실용적인 표현 사용
- 존댓말 사용

⚠️ 주의사항:
- JSON 형식 엄수
- 각 월별 운세는 50-80자 준수
- 1년 종합은 200-300자 준수
- 추상적이거나 모호한 표현 지양`;
}

// ============================================
// 2. 금전운 프롬프트
// ============================================
function generatePrompt_Money(guaNumber, guaName, guaSymbol, guaDescription, monthlyText) {
  return `당신은 토정비결 전문가입니다. 144괘 중 ${guaNumber}번 "${guaName}(${guaSymbol})" 괘가 나왔습니다.

📜 괘의 기본 의미:
${guaDescription}

📅 12개월 기본 운세:
${monthlyText}

🎯 작업 지시:
위 144괘의 의미를 바탕으로 2025년 **금전운**을 작성해주세요.

✅ 출력 형식 (JSON):
{
  "yearFortune": "2025년 금전운 종합 (200-300자)",
  "monthly": {
    "1월": "1월 금전운 (50-80자)",
    "2월": "2월 금전운 (50-80자)",
    "3월": "3월 금전운 (50-80자)",
    "4월": "4월 금전운 (50-80자)",
    "5월": "5월 금전운 (50-80자)",
    "6월": "6월 금전운 (50-80자)",
    "7월": "7월 금전운 (50-80자)",
    "8월": "8월 금전운 (50-80자)",
    "9월": "9월 금전운 (50-80자)",
    "10월": "10월 금전운 (50-80자)",
    "11월": "11월 금전운 (50-80자)",
    "12월": "12월 금전운 (50-80자)"
  }
}

💰 금전운 초점:
- 수입의 증감 흐름
- 지출 관리 및 절약 시기
- 저축 및 재테크 기회
- 투자 타이밍 (신중함 강조)
- 예상치 못한 금전 변화
- 재정 안정성
- 부수입 가능성

📌 작성 가이드:
- 144괘를 재물/돈의 관점에서 해석
- 구체적인 금전 관련 조언
- 무리한 투자 경고 포함
- 계획적 소비 강조
- 존댓말 사용

⚠️ 주의사항:
- JSON 형식 엄수
- 각 월별 운세는 50-80자 준수
- 1년 종합은 200-300자 준수
- 횡재나 도박 등 비현실적 표현 금지
- 투자 권유는 신중하게 표현`;
}

// ============================================
// 3. 애정운 프롬프트
// ============================================
function generatePrompt_Love(guaNumber, guaName, guaSymbol, guaDescription, monthlyText) {
  return `당신은 토정비결 전문가입니다. 144괘 중 ${guaNumber}번 "${guaName}(${guaSymbol})" 괘가 나왔습니다.

📜 괘의 기본 의미:
${guaDescription}

📅 12개월 기본 운세:
${monthlyText}

🎯 작업 지시:
위 144괘의 의미를 바탕으로 2025년 **애정운**을 작성해주세요.

✅ 출력 형식 (JSON):
{
  "yearFortune": "2025년 애정운 종합 (200-300자)",
  "monthly": {
    "1월": "1월 애정운 (50-80자)",
    "2월": "2월 애정운 (50-80자)",
    "3월": "3월 애정운 (50-80자)",
    "4월": "4월 애정운 (50-80자)",
    "5월": "5월 애정운 (50-80자)",
    "6월": "6월 애정운 (50-80자)",
    "7월": "7월 애정운 (50-80자)",
    "8월": "8월 애정운 (50-80자)",
    "9월": "9월 애정운 (50-80자)",
    "10월": "10월 애정운 (50-80자)",
    "11월": "11월 애정운 (50-80자)",
    "12월": "12월 애정운 (50-80자)"
  }
}

💕 애정운 초점:
- 새로운 만남의 기회
- 기존 관계의 발전
- 갈등과 오해 해결
- 소통의 중요성
- 인연의 변화
- 사랑 고백 타이밍
- 결혼/동거 등 관계 진전
- 이별 가능성 및 대응

📌 작성 가이드:
- 144괘를 연애/인연의 관점에서 해석
- 미혼/기혼 모두에게 적용 가능하게
- 구체적인 관계 조언
- 긍정적이면서도 현실적
- 존댓말 사용

⚠️ 주의사항:
- JSON 형식 엄수
- 각 월별 운세는 50-80자 준수
- 1년 종합은 200-300자 준수
- 운명적 만남 등 과장 표현 지양
- 성별 편향 없이 중립적 표현`;
}

// ============================================
// 4. 건강운 프롬프트
// ============================================
function generatePrompt_Health(guaNumber, guaName, guaSymbol, guaDescription, monthlyText) {
  return `당신은 토정비결 전문가입니다. 144괘 중 ${guaNumber}번 "${guaName}(${guaSymbol})" 괘가 나왔습니다.

📜 괘의 기본 의미:
${guaDescription}

📅 12개월 기본 운세:
${monthlyText}

🎯 작업 지시:
위 144괘의 의미를 바탕으로 2025년 **건강운**을 작성해주세요.

✅ 출력 형식 (JSON):
{
  "yearFortune": "2025년 건강운 종합 (200-300자)",
  "monthly": {
    "1월": "1월 건강운 (50-80자)",
    "2월": "2월 건강운 (50-80자)",
    "3월": "3월 건강운 (50-80자)",
    "4월": "4월 건강운 (50-80자)",
    "5월": "5월 건강운 (50-80자)",
    "6월": "6월 건강운 (50-80자)",
    "7월": "7월 건강운 (50-80자)",
    "8월": "8월 건강운 (50-80자)",
    "9월": "9월 건강운 (50-80자)",
    "10월": "10월 건강운 (50-80자)",
    "11월": "11월 건강운 (50-80자)",
    "12월": "12월 건강운 (50-80자)"
  }
}

🏥 건강운 초점:
- 전반적인 건강 상태
- 주의해야 할 신체 부위
- 환절기 건강 관리
- 규칙적인 생활의 중요성
- 운동 및 식습관 조언
- 정기 검진 권유
- 스트레스 관리
- 휴식의 필요성

📌 작성 가이드:
- 144괘를 건강/신체의 관점에서 해석
- 예방적 조언 중심
- 구체적인 건강 관리법 제시
- 긍정적이면서도 주의 환기
- 존댓말 사용

⚠️ 주의사항:
- JSON 형식 엄수
- 각 월별 운세는 50-80자 준수
- 1년 종합은 200-300자 준수
- 특정 질병명 언급 금지
- 의학적 진단이나 치료법 제시 금지
- 반드시 "전문의 상담 권장" 표현 포함`;
}

// ============================================
// 5. 가정운 프롬프트
// ============================================
function generatePrompt_Family(guaNumber, guaName, guaSymbol, guaDescription, monthlyText) {
  return `당신은 토정비결 전문가입니다. 144괘 중 ${guaNumber}번 "${guaName}(${guaSymbol})" 괘가 나왔습니다.

📜 괘의 기본 의미:
${guaDescription}

📅 12개월 기본 운세:
${monthlyText}

🎯 작업 지시:
위 144괘의 의미를 바탕으로 2025년 **가정운**을 작성해주세요.

✅ 출력 형식 (JSON):
{
  "yearFortune": "2025년 가정운 종합 (200-300자)",
  "monthly": {
    "1월": "1월 가정운 (50-80자)",
    "2월": "2월 가정운 (50-80자)",
    "3월": "3월 가정운 (50-80자)",
    "4월": "4월 가정운 (50-80자)",
    "5월": "5월 가정운 (50-80자)",
    "6월": "6월 가정운 (50-80자)",
    "7월": "7월 가정운 (50-80자)",
    "8월": "8월 가정운 (50-80자)",
    "9월": "9월 가정운 (50-80자)",
    "10월": "10월 가정운 (50-80자)",
    "11월": "11월 가정운 (50-80자)",
    "12월": "12월 가정운 (50-80자)"
  }
}

👨‍👩‍👧‍👦 가정운 초점:
- 가족 간 화목과 소통
- 부부 관계
- 자녀/손주와의 관계
- 부모님 건강 및 봉양
- 가족 건강 관리
- 가족 행사 (생일, 명절, 기념일)
- 가족 여행 및 나들이
- 집안 분위기
- 가정 경제 안정

📌 작성 가이드:
- 144괘를 가정/가족의 관점에서 해석
- 55~65세 여성 타겟 (자녀 성인, 손주 있을 수 있음)
- 가족 간 관계 개선 조언
- 따뜻하고 긍정적인 표현
- 존댓말 사용

⚠️ 주의사항:
- JSON 형식 엄수
- 각 월별 운세는 50-80자 준수
- 1년 종합은 200-300자 준수
- 세대 간 갈등 표현 신중히
- 가족 구성원 모두 포괄`;
}

// ============================================
// 6. 여행운 프롬프트
// ============================================
function generatePrompt_Travel(guaNumber, guaName, guaSymbol, guaDescription, monthlyText) {
  return `당신은 토정비결 전문가입니다. 144괘 중 ${guaNumber}번 "${guaName}(${guaSymbol})" 괘가 나왔습니다.

📜 괘의 기본 의미:
${guaDescription}

📅 12개월 기본 운세:
${monthlyText}

🎯 작업 지시:
위 144괘의 의미를 바탕으로 2025년 **여행운**을 작성해주세요.

✅ 출력 형식 (JSON):
{
  "yearFortune": "2025년 여행운 종합 (200-300자)",
  "monthly": {
    "1월": "1월 여행운 (50-80자)",
    "2월": "2월 여행운 (50-80자)",
    "3월": "3월 여행운 (50-80자)",
    "4월": "4월 여행운 (50-80자)",
    "5월": "5월 여행운 (50-80자)",
    "6월": "6월 여행운 (50-80자)",
    "7월": "7월 여행운 (50-80자)",
    "8월": "8월 여행운 (50-80자)",
    "9월": "9월 여행운 (50-80자)",
    "10월": "10월 여행운 (50-80자)",
    "11월": "11월 여행운 (50-80자)",
    "12월": "12월 여행운 (50-80자)"
  }
}

✈️ 여행운 초점:
- 여행 계획 적기
- 여행지 선택 방향 (국내/해외)
- 안전한 여행
- 가족/친구와 동행
- 새로운 경험과 추억
- 휴식과 재충전
- 건강 고려 여행
- 계절별 추천 여행
- 짧은 나들이부터 긴 여행까지

📌 작성 가이드:
- 144괘를 여행/여가의 관점에서 해석
- 55~65세 타겟 (건강 고려 필수)
- 구체적인 여행 시기 조언
- 안전과 건강 우선 강조
- 존댓말 사용

⚠️ 주의사항:
- JSON 형식 엄수
- 각 월별 운세는 50-80자 준수
- 1년 종합은 200-300자 준수
- 무리한 여행 권유 지양
- 건강 상태 고려 표현 포함
- 계절과 날씨 고려`;
}

module.exports = {
  getTojeongPrompt
};
