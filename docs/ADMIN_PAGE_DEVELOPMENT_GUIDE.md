# ğŸ” ê´€ë¦¬ì í˜ì´ì§€ ê°œë°œ ê°€ì´ë“œ

ğŸ“… ì‘ì„±ì¼: 2025-01-07  
ğŸ¯ ëª©ì : ìš´ì„¸í”Œë«í¼ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ê°œë°œ  
ğŸ”‘ ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸: `dkssud11@@`

---

## ğŸ“Œ í”„ë¡œì íŠ¸ ê°œìš”

### í˜„ì¬ ìƒí™©
- **í”„ë¡œì íŠ¸ëª…**: ìš´ì„¸í”Œë«í¼ (Fortune Platform)
- **ê²½ë¡œ**: `C:\xampp\htdocs\mysite\ìš´ì„¸í”Œë«í¼\`
- **ê¸°ìˆ  ìŠ¤íƒ**: 
  - ë°±ì—”ë“œ: Node.js + Express + MongoDB
  - í”„ë¡ íŠ¸ì—”ë“œ: HTML/CSS/JavaScript
  - AI: Claude API
- **í¬íŠ¸**: 3000 (ë°±ì—”ë“œ ì„œë²„)
- **GitHub**: https://github.com/wewq1816/fortune-platform.git

### í˜„ì¬ ê¸°ëŠ¥ (8ê°œ)
1. ì˜¤ëŠ˜ì˜ ìš´ì„¸
2. íƒ€ë¡œ ì¹´ë“œ
3. ì‚¬ì£¼íŒ”ì
4. í† ì •ë¹„ê²°
5. ê¿ˆ í•´ëª½
6. ë³„ìë¦¬ ìš´ì„¸
7. ë¡œë˜ ë²ˆí˜¸
8. ê¶í•© ë³´ê¸°

### ì´ìš©ê¶Œ ì‹œìŠ¤í…œ
- ì‚¬ìš©ìëŠ” **í•˜ë£¨ 2ë²ˆ** ë¬´ë£Œë¡œ ê¸°ëŠ¥ ì‚¬ìš© ê°€ëŠ¥
- ì¿ íŒ¡ ê´‘ê³ ë¥¼ ë³´ë©´ ì´ìš©ê¶Œ 2íšŒ ì¶©ì „
- í˜„ì¬ ì¿ íŒ¡ ë§í¬ëŠ” í•˜ë“œì½”ë”©ë˜ì–´ ìˆìŒ â†’ **ê´€ë¦¬ì í˜ì´ì§€ì—ì„œ ë³€ê²½ ê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ì–´ì•¼ í•¨**

---

## ğŸ¯ ê´€ë¦¬ì í˜ì´ì§€ ìš”êµ¬ì‚¬í•­

### âœ… í•„ìˆ˜ ê¸°ëŠ¥

#### 1. ê´€ë¦¬ì ì¸ì¦
- ë¡œê·¸ì¸ í˜ì´ì§€ í•„ìš”
- ID: `admin`
- ë¹„ë°€ë²ˆí˜¸: `dkssud11@@` (í•´ì‹œ ì•”í˜¸í™” í•„ìˆ˜)
- ì„¸ì…˜ ìœ ì§€ (JWT ë˜ëŠ” Session)
- ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥

#### 2. ì¿ íŒ¡ ë§í¬ ê´€ë¦¬
- í˜„ì¬ ì¿ íŒ¡ ë§í¬ í‘œì‹œ
- ë§í¬ ìˆ˜ì • ê¸°ëŠ¥
- ì €ì¥ ë²„íŠ¼ â†’ ì¦‰ì‹œ ì ìš©
- ë§í¬ ìœ íš¨ì„± ê²€ì¦ (URL í˜•ì‹)

#### 3. ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œ (5ì´ˆë§ˆë‹¤ ìë™ ê°±ì‹ )
- **ì˜¤ëŠ˜ ë°©ë¬¸ì ìˆ˜** (ì‹¤ì‹œê°„ ì¹´ìš´íŠ¸)
- **ì˜¤ëŠ˜ ì¿ íŒ¡ í´ë¦­ ìˆ˜** (ì‹¤ì‹œê°„ ì¹´ìš´íŠ¸)
- **ì˜¤ëŠ˜ ì´ìš©ê¶Œ ì‚¬ìš© íšŸìˆ˜** (ì‹¤ì‹œê°„ ì¹´ìš´íŠ¸)
- ì „ì¼ ëŒ€ë¹„ ì¦ê°ë¥  í‘œì‹œ

#### 4. ë°©ë¬¸ì í†µê³„
- **ì´ ë°©ë¬¸ì ìˆ˜** (ëˆ„ì )
- **ì¼ë³„ ë°©ë¬¸ì ìˆ˜** (ê·¸ë˜í”„: ìµœê·¼ 7ì¼/30ì¼)
- **ì‹œê°„ëŒ€ë³„ ë°©ë¬¸ ë¶„í¬** (0~23ì‹œ ë§‰ëŒ€ ê·¸ë˜í”„)
- **ìš”ì¼ë³„ íŒ¨í„´** (ì›”~ì¼)

#### 5. ì¿ íŒ¡ í´ë¦­ í†µê³„
- **ì´ í´ë¦­ ìˆ˜** (ëˆ„ì )
- **ì¼ë³„ í´ë¦­ ìˆ˜** (ê·¸ë˜í”„: ìµœê·¼ 7ì¼/30ì¼)
- **ì „í™˜ìœ¨** (ë°©ë¬¸ì ëŒ€ë¹„ í´ë¦­ë¥  %)

#### 6. ê¸°ëŠ¥ë³„ ì´ìš©ê¶Œ ì‚¬ìš© í†µê³„
- **8ê°œ ê¸°ëŠ¥ë³„ ì´ ì‚¬ìš©ëŸ‰**
  - ì˜¤ëŠ˜ì˜ ìš´ì„¸
  - íƒ€ë¡œ ì¹´ë“œ
  - ì‚¬ì£¼íŒ”ì
  - í† ì •ë¹„ê²°
  - ê¿ˆ í•´ëª½
  - ë³„ìë¦¬ ìš´ì„¸
  - ë¡œë˜ ë²ˆí˜¸
  - ê¶í•© ë³´ê¸°
- **8ê°œ ê¸°ëŠ¥ë³„ ì¼ë³„ ì‚¬ìš©ëŸ‰** (ê·¸ë˜í”„)
- **ì¸ê¸° ê¸°ëŠ¥ ìˆœìœ„** (ë§‰ëŒ€ ê·¸ë˜í”„)
- **íŒŒì´ ì°¨íŠ¸** (ë¹„ìœ¨)

#### 7. ì‚¬ìš©ì í–‰ë™ ë¶„ì„
- **ì´ìš©ê¶Œ ì¶©ì „ë¥ **: ë°©ë¬¸ì ì¤‘ ì¿ íŒ¡ í´ë¦­í•œ ë¹„ìœ¨
- **2íšŒ ì‚¬ìš© ì™„ë£Œìœ¨**: 2íšŒ ì¤‘ í‰ê·  ëª‡ ë²ˆ ì‚¬ìš©í–ˆëŠ”ì§€
- **ì¬ë°©ë¬¸ìœ¨**: ë‹¤ì‹œ ì°¾ì•„ì˜¨ ì‚¬ìš©ì ë¹„ìœ¨

#### 8. ì‹œìŠ¤í…œ ìƒíƒœ
- ì„œë²„ ìƒíƒœ (ì‹¤í–‰ ì¤‘/ì¤‘ì§€)
- ë°ì´í„°ë² ì´ìŠ¤ ìš©ëŸ‰
- ìµœê·¼ ì—ëŸ¬ ë¡œê·¸ (ìµœê·¼ 10ê°œ)
- API ì‘ë‹µ ì†ë„

#### 9. ë°ì´í„° ë‚´ë³´ë‚´ê¸°
- ê¸°ê°„ë³„ í†µê³„ Excel/CSV ë‹¤ìš´ë¡œë“œ
- ë‚ ì§œ ë²”ìœ„ ì„ íƒ

#### 10. ì‹¤ì‹œê°„ ì•Œë¦¼ ì‹œìŠ¤í…œ
- **ë¸Œë¼ìš°ì € ì•Œë¦¼**:
  - "ì˜¤ëŠ˜ ë°©ë¬¸ì 100ëª… ë‹¬ì„±!"
  - "ì¿ íŒ¡ í´ë¦­ 50íšŒ ëŒíŒŒ!"
- **ì‹œìŠ¤í…œ ì•Œë¦¼**:
  - "ì„œë²„ ì‘ë‹µ ì†ë„ ëŠë¦¼"
  - "ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ëŠê¹€"
- **ì¼ê°„ ë¦¬í¬íŠ¸**:
  - ë§¤ì¼ ìì • ì˜¤ëŠ˜ í†µê³„ ìš”ì•½

### âŒ ì œì™¸ ê¸°ëŠ¥
- ìˆ˜ìµ ë¶„ì„ (ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤)

---

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### 1. `admin_users` ì»¬ë ‰ì…˜ (ê´€ë¦¬ì ê³„ì •)
```json
{
  "_id": ObjectId,
  "username": "admin",
  "password": "$2b$10$...", // bcrypt í•´ì‹œ
  "createdAt": ISODate,
  "lastLogin": ISODate
}
```

### 2. `admin_settings` ì»¬ë ‰ì…˜ (ê´€ë¦¬ì ì„¤ì •)
```json
{
  "_id": ObjectId,
  "coupangLink": "https://link.coupang.com/a/...",
  "updatedAt": ISODate,
  "updatedBy": "admin"
}
```

### 3. `analytics_visitors` ì»¬ë ‰ì…˜ (ë°©ë¬¸ì ì¶”ì )
```json
{
  "_id": ObjectId,
  "visitorId": "uuid-xxx", // ë¸Œë¼ìš°ì € ê³ ìœ  ID
  "visitDate": "2025-01-07",
  "visitTime": ISODate,
  "visitHour": 14, // ì‹œê°„ëŒ€ (0~23)
  "visitDay": "í™”ìš”ì¼",
  "userAgent": "...",
  "isReturning": false // ì¬ë°©ë¬¸ ì—¬ë¶€
}
```

### 4. `analytics_coupang_clicks` ì»¬ë ‰ì…˜ (ì¿ íŒ¡ í´ë¦­ ì¶”ì )
```json
{
  "_id": ObjectId,
  "visitorId": "uuid-xxx",
  "clickDate": "2025-01-07",
  "clickTime": ISODate,
  "clickHour": 14,
  "referrer": "..."
}
```

### 5. `analytics_ticket_usage` ì»¬ë ‰ì…˜ (ì´ìš©ê¶Œ ì‚¬ìš© ì¶”ì )
```json
{
  "_id": ObjectId,
  "visitorId": "uuid-xxx",
  "feature": "ì‚¬ì£¼íŒ”ì", // ê¸°ëŠ¥ëª…
  "usageDate": "2025-01-07",
  "usageTime": ISODate,
  "usageHour": 14
}
```

### 6. `system_logs` ì»¬ë ‰ì…˜ (ì‹œìŠ¤í…œ ë¡œê·¸)
```json
{
  "_id": ObjectId,
  "level": "error", // info, warning, error
  "message": "...",
  "timestamp": ISODate,
  "source": "server"
}
```

---

## ğŸ“ íŒŒì¼ êµ¬ì¡°

```
ìš´ì„¸í”Œë«í¼/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â””â”€â”€ admin.js           â† ìƒˆë¡œ ìƒì„± (ê´€ë¦¬ì API)
â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â””â”€â”€ auth.js             â† ìƒˆë¡œ ìƒì„± (ì¸ì¦ ë¯¸ë“¤ì›¨ì–´)
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ AdminUser.js        â† ìƒˆë¡œ ìƒì„±
â”‚   â”‚   â”œâ”€â”€ AdminSettings.js    â† ìƒˆë¡œ ìƒì„±
â”‚   â”‚   â””â”€â”€ Analytics.js        â† ìƒˆë¡œ ìƒì„±
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ analytics.js        â† ìƒˆë¡œ ìƒì„± (í†µê³„ ìˆ˜ì§‘ ìœ í‹¸)
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ admin/
â”‚   â”‚   â”œâ”€â”€ login.html          â† ìƒˆë¡œ ìƒì„± (ê´€ë¦¬ì ë¡œê·¸ì¸)
â”‚   â”‚   â”œâ”€â”€ dashboard.html      â† ìƒˆë¡œ ìƒì„± (ëŒ€ì‹œë³´ë“œ)
â”‚   â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”‚   â””â”€â”€ admin.css       â† ìƒˆë¡œ ìƒì„±
â”‚   â”‚   â””â”€â”€ js/
â”‚   â”‚       â”œâ”€â”€ admin-auth.js   â† ìƒˆë¡œ ìƒì„±
â”‚   â”‚       â”œâ”€â”€ dashboard.js    â† ìƒˆë¡œ ìƒì„±
â”‚   â”‚       â””â”€â”€ notifications.js â† ìƒˆë¡œ ìƒì„± (ì•Œë¦¼)
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ analytics-tracker.js â† ìƒˆë¡œ ìƒì„± (ë°©ë¬¸ì ì¶”ì )
â”‚   â”‚
â”‚   â””â”€â”€ index.html               â† ìˆ˜ì • í•„ìš” (ì¶”ì  ì½”ë“œ ì¶”ê°€)
â”‚
â””â”€â”€ server.js                    â† ìˆ˜ì • í•„ìš” (ë¼ìš°í„° ì¶”ê°€)
```

---

## ğŸ› ï¸ ë‹¨ê³„ë³„ ì‘ì—… ê°€ì´ë“œ

### Phase 1: ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™” (10ë¶„)

#### ì‘ì—… ë‚´ìš©:
1. MongoDBì— ì»¬ë ‰ì…˜ ìƒì„±
2. ê´€ë¦¬ì ê³„ì • ìƒì„± (ë¹„ë°€ë²ˆí˜¸ í•´ì‹œ)
3. ì´ˆê¸° ì„¤ì • ì €ì¥

#### íŒŒì¼: `backend/scripts/init-admin.js`
```javascript
const bcrypt = require('bcryptjs');
const { MongoClient } = require('mongodb');

async function initAdmin() {
  const client = await MongoClient.connect('mongodb://localhost:27017');
  const db = client.db('fortune_platform');
  
  // 1. ê´€ë¦¬ì ê³„ì • ìƒì„±
  const hashedPassword = await bcrypt.hash('dkssud11@@', 10);
  await db.collection('admin_users').insertOne({
    username: 'admin',
    password: hashedPassword,
    createdAt: new Date()
  });
  
  // 2. ì´ˆê¸° ì„¤ì •
  await db.collection('admin_settings').insertOne({
    coupangLink: 'https://link.coupang.com/ê¸°ì¡´ë§í¬',
    updatedAt: new Date()
  });
  
  console.log('âœ… ê´€ë¦¬ì ì´ˆê¸°í™” ì™„ë£Œ');
  client.close();
}

initAdmin();
```

**ì‹¤í–‰:**
```bash
cd C:\xampp\htdocs\mysite\ìš´ì„¸í”Œë«í¼\backend
node scripts/init-admin.js
```

---

### Phase 2: í†µê³„ ìˆ˜ì§‘ ì‹œìŠ¤í…œ (30ë¶„)

#### 2.1. ë°©ë¬¸ì ì¶”ì  (í”„ë¡ íŠ¸ì—”ë“œ)

**íŒŒì¼: `frontend/utils/analytics-tracker.js`**
```javascript
// ë°©ë¬¸ì ê³ ìœ  ID ìƒì„±/ê°€ì ¸ì˜¤ê¸°
function getVisitorId() {
  let visitorId = localStorage.getItem('visitorId');
  if (!visitorId) {
    visitorId = 'visitor_' + Date.now() + '_' + Math.random().toString(36);
    localStorage.setItem('visitorId', visitorId);
  }
  return visitorId;
}

// ë°©ë¬¸ ê¸°ë¡
async function trackVisit() {
  const visitorId = getVisitorId();
  
  await fetch('http://localhost:3000/api/analytics/visit', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      visitorId,
      userAgent: navigator.userAgent
    })
  });
}

// ì¿ íŒ¡ í´ë¦­ ì¶”ì 
async function trackCoupangClick() {
  const visitorId = getVisitorId();
  
  await fetch('http://localhost:3000/api/analytics/coupang-click', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ visitorId })
  });
}

// ì´ìš©ê¶Œ ì‚¬ìš© ì¶”ì 
async function trackTicketUsage(feature) {
  const visitorId = getVisitorId();
  
  await fetch('http://localhost:3000/api/analytics/ticket-usage', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ visitorId, feature })
  });
}

// í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ì‹¤í–‰
document.addEventListener('DOMContentLoaded', trackVisit);
```

#### 2.2. ì¶”ì  ì½”ë“œ í†µí•©

**ìˆ˜ì • íŒŒì¼: `frontend/index.html`**
```html
<!-- <head> ì•ˆì— ì¶”ê°€ -->
<script src="utils/analytics-tracker.js"></script>
```

**ìˆ˜ì • íŒŒì¼: `frontend/utils/ticket-system.js`**
```javascript
// ê¸°ì¡´ ì¿ íŒ¡ ê²Œì´íŠ¸ ì´ë™ í•¨ìˆ˜ ìˆ˜ì •
function goToCoupangGate() {
  trackCoupangClick(); // ì¶”ê°€
  window.location.href = 'pages/coupang-gate.html';
}

// ê¸°ì¡´ ì´ìš©ê¶Œ ì‚¬ìš© í•¨ìˆ˜ ìˆ˜ì •
function useTicket(featureName) {
  if (canUseTicket()) {
    trackTicketUsage(featureName); // ì¶”ê°€
    decrementTicket();
    return true;
  }
  return false;
}
```

---

### Phase 3: ë°±ì—”ë“œ API ê°œë°œ (40ë¶„)

#### 3.1. ì¸ì¦ ë¯¸ë“¤ì›¨ì–´

**íŒŒì¼: `backend/middleware/auth.js`**
```javascript
const jwt = require('jsonwebtoken');
const SECRET_KEY = 'your-secret-key-change-this'; // ë³€ê²½ í•„ìš”!

function authMiddleware(req, res, next) {
  const token = req.headers.authorization?.split(' ')[1];
  
  if (!token) {
    return res.status(401).json({ error: 'ì¸ì¦ í•„ìš”' });
  }
  
  try {
    const decoded = jwt.verify(token, SECRET_KEY);
    req.admin = decoded;
    next();
  } catch (error) {
    res.status(401).json({ error: 'ìœ íš¨í•˜ì§€ ì•Šì€ í† í°' });
  }
}

module.exports = { authMiddleware, SECRET_KEY };
```

#### 3.2. ê´€ë¦¬ì API ë¼ìš°í„°

**íŒŒì¼: `backend/routes/admin.js`**
```javascript
const express = require('express');
const bcrypt = require('bcryptjs');
const jwt = require('jsonwebtoken');
const { authMiddleware, SECRET_KEY } = require('../middleware/auth');
const router = express.Router();

// MongoDB ì—°ê²° (ê¸°ì¡´ ì—°ê²° ì‚¬ìš©)
const { db } = require('../db'); // ê¸°ì¡´ DB ì—°ê²°

// 1. ë¡œê·¸ì¸ API
router.post('/login', async (req, res) => {
  try {
    const { username, password } = req.body;
    
    const admin = await db.collection('admin_users').findOne({ username });
    if (!admin) {
      return res.status(401).json({ error: 'ì˜ëª»ëœ ì¸ì¦ ì •ë³´' });
    }
    
    const isValid = await bcrypt.compare(password, admin.password);
    if (!isValid) {
      return res.status(401).json({ error: 'ì˜ëª»ëœ ì¸ì¦ ì •ë³´' });
    }
    
    const token = jwt.sign({ username }, SECRET_KEY, { expiresIn: '24h' });
    
    // ë§ˆì§€ë§‰ ë¡œê·¸ì¸ ì‹œê°„ ì—…ë°ì´íŠ¸
    await db.collection('admin_users').updateOne(
      { username },
      { $set: { lastLogin: new Date() } }
    );
    
    res.json({ token, username });
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

// 2. ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œ í†µê³„
router.get('/stats/today', authMiddleware, async (req, res) => {
  try {
    const today = new Date().toISOString().split('T')[0];
    
    // ì˜¤ëŠ˜ ë°©ë¬¸ì ìˆ˜
    const visitorsToday = await db.collection('analytics_visitors')
      .countDocuments({ visitDate: today });
    
    // ì˜¤ëŠ˜ ì¿ íŒ¡ í´ë¦­ ìˆ˜
    const clicksToday = await db.collection('analytics_coupang_clicks')
      .countDocuments({ clickDate: today });
    
    // ì˜¤ëŠ˜ ì´ìš©ê¶Œ ì‚¬ìš© íšŸìˆ˜
    const usageToday = await db.collection('analytics_ticket_usage')
      .countDocuments({ usageDate: today });
    
    // ì „ì¼ ë°ì´í„° (ì¦ê°ë¥  ê³„ì‚°)
    const yesterday = new Date(Date.now() - 86400000).toISOString().split('T')[0];
    const visitorsYesterday = await db.collection('analytics_visitors')
      .countDocuments({ visitDate: yesterday });
    const clicksYesterday = await db.collection('analytics_coupang_clicks')
      .countDocuments({ clickDate: yesterday });
    
    res.json({
      visitorsToday,
      clicksToday,
      usageToday,
      visitorsChange: ((visitorsToday - visitorsYesterday) / visitorsYesterday * 100).toFixed(1),
      clicksChange: ((clicksToday - clicksYesterday) / clicksYesterday * 100).toFixed(1),
      conversionRate: (clicksToday / visitorsToday * 100).toFixed(1)
    });
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

// 3. ë°©ë¬¸ì í†µê³„
router.get('/stats/visitors', authMiddleware, async (req, res) => {
  try {
    const { days = 7 } = req.query;
    
    // ì¼ë³„ ë°©ë¬¸ì (ìµœê·¼ Nì¼)
    const dailyVisitors = await db.collection('analytics_visitors').aggregate([
      {
        $match: {
          visitDate: {
            $gte: new Date(Date.now() - days * 86400000).toISOString().split('T')[0]
          }
        }
      },
      {
        $group: {
          _id: '$visitDate',
          count: { $sum: 1 }
        }
      },
      { $sort: { _id: 1 } }
    ]).toArray();
    
    // ì‹œê°„ëŒ€ë³„ ë°©ë¬¸ ë¶„í¬
    const hourlyDistribution = await db.collection('analytics_visitors').aggregate([
      {
        $group: {
          _id: '$visitHour',
          count: { $sum: 1 }
        }
      },
      { $sort: { _id: 1 } }
    ]).toArray();
    
    // ìš”ì¼ë³„ íŒ¨í„´
    const weeklyPattern = await db.collection('analytics_visitors').aggregate([
      {
        $group: {
          _id: '$visitDay',
          count: { $sum: 1 }
        }
      }
    ]).toArray();
    
    // ì´ ë°©ë¬¸ì
    const totalVisitors = await db.collection('analytics_visitors').countDocuments();
    
    res.json({
      totalVisitors,
      dailyVisitors,
      hourlyDistribution,
      weeklyPattern
    });
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

// 4. ì¿ íŒ¡ í´ë¦­ í†µê³„
router.get('/stats/coupang', authMiddleware, async (req, res) => {
  try {
    const { days = 7 } = req.query;
    
    // ì¼ë³„ í´ë¦­ ìˆ˜
    const dailyClicks = await db.collection('analytics_coupang_clicks').aggregate([
      {
        $match: {
          clickDate: {
            $gte: new Date(Date.now() - days * 86400000).toISOString().split('T')[0]
          }
        }
      },
      {
        $group: {
          _id: '$clickDate',
          count: { $sum: 1 }
        }
      },
      { $sort: { _id: 1 } }
    ]).toArray();
    
    // ì´ í´ë¦­ ìˆ˜
    const totalClicks = await db.collection('analytics_coupang_clicks').countDocuments();
    
    res.json({ totalClicks, dailyClicks });
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

// 5. ê¸°ëŠ¥ë³„ ì´ìš©ê¶Œ ì‚¬ìš© í†µê³„
router.get('/stats/features', authMiddleware, async (req, res) => {
  try {
    // ê¸°ëŠ¥ë³„ ì´ ì‚¬ìš©ëŸ‰
    const featureUsage = await db.collection('analytics_ticket_usage').aggregate([
      {
        $group: {
          _id: '$feature',
          count: { $sum: 1 }
        }
      },
      { $sort: { count: -1 } }
    ]).toArray();
    
    // ê¸°ëŠ¥ë³„ ì¼ë³„ ì‚¬ìš©ëŸ‰ (ìµœê·¼ 7ì¼)
    const featureDaily = await db.collection('analytics_ticket_usage').aggregate([
      {
        $match: {
          usageDate: {
            $gte: new Date(Date.now() - 7 * 86400000).toISOString().split('T')[0]
          }
        }
      },
      {
        $group: {
          _id: { feature: '$feature', date: '$usageDate' },
          count: { $sum: 1 }
        }
      },
      { $sort: { '_id.date': 1 } }
    ]).toArray();
    
    res.json({ featureUsage, featureDaily });
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

// 6. ì¿ íŒ¡ ë§í¬ ì¡°íšŒ
router.get('/settings/coupang-link', authMiddleware, async (req, res) => {
  try {
    const settings = await db.collection('admin_settings').findOne();
    res.json({ coupangLink: settings?.coupangLink || '' });
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

// 7. ì¿ íŒ¡ ë§í¬ ìˆ˜ì •
router.put('/settings/coupang-link', authMiddleware, async (req, res) => {
  try {
    const { coupangLink } = req.body;
    
    // URL ìœ íš¨ì„± ê²€ì¦
    if (!coupangLink.startsWith('http')) {
      return res.status(400).json({ error: 'ìœ íš¨í•˜ì§€ ì•Šì€ URL' });
    }
    
    await db.collection('admin_settings').updateOne(
      {},
      {
        $set: {
          coupangLink,
          updatedAt: new Date(),
          updatedBy: req.admin.username
        }
      },
      { upsert: true }
    );
    
    res.json({ success: true, coupangLink });
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

// 8. ë°ì´í„° ë‚´ë³´ë‚´ê¸° (CSV)
router.get('/export', authMiddleware, async (req, res) => {
  try {
    const { startDate, endDate } = req.query;
    
    // ë°©ë¬¸ì ë°ì´í„°
    const visitors = await db.collection('analytics_visitors')
      .find({
        visitDate: { $gte: startDate, $lte: endDate }
      })
      .toArray();
    
    // CSV ìƒì„±
    const csv = visitors.map(v => 
      `${v.visitDate},${v.visitTime},${v.visitorId}`
    ).join('\n');
    
    res.setHeader('Content-Type', 'text/csv');
    res.setHeader('Content-Disposition', 'attachment; filename=analytics.csv');
    res.send('ë‚ ì§œ,ì‹œê°„,ë°©ë¬¸ìID\n' + csv);
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

module.exports = router;
```

#### 3.3. ë¶„ì„ API (ì¶”ì ìš©)

**íŒŒì¼: `backend/routes/analytics.js`**
```javascript
const express = require('express');
const router = express.Router();
const { db } = require('../db');

// ë°©ë¬¸ ê¸°ë¡
router.post('/visit', async (req, res) => {
  try {
    const { visitorId, userAgent } = req.body;
    const now = new Date();
    
    await db.collection('analytics_visitors').insertOne({
      visitorId,
      visitDate: now.toISOString().split('T')[0],
      visitTime: now,
      visitHour: now.getHours(),
      visitDay: ['ì¼ìš”ì¼', 'ì›”ìš”ì¼', 'í™”ìš”ì¼', 'ìˆ˜ìš”ì¼', 'ëª©ìš”ì¼', 'ê¸ˆìš”ì¼', 'í† ìš”ì¼'][now.getDay()],
      userAgent,
      isReturning: false // TODO: ì¬ë°©ë¬¸ ë¡œì§
    });
    
    res.json({ success: true });
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

// ì¿ íŒ¡ í´ë¦­ ê¸°ë¡
router.post('/coupang-click', async (req, res) => {
  try {
    const { visitorId } = req.body;
    const now = new Date();
    
    await db.collection('analytics_coupang_clicks').insertOne({
      visitorId,
      clickDate: now.toISOString().split('T')[0],
      clickTime: now,
      clickHour: now.getHours()
    });
    
    res.json({ success: true });
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

// ì´ìš©ê¶Œ ì‚¬ìš© ê¸°ë¡
router.post('/ticket-usage', async (req, res) => {
  try {
    const { visitorId, feature } = req.body;
    const now = new Date();
    
    await db.collection('analytics_ticket_usage').insertOne({
      visitorId,
      feature,
      usageDate: now.toISOString().split('T')[0],
      usageTime: now,
      usageHour: now.getHours()
    });
    
    res.json({ success: true });
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

module.exports = router;
```

#### 3.4. server.js ìˆ˜ì •

**ìˆ˜ì • íŒŒì¼: `backend/server.js`**
```javascript
// ê¸°ì¡´ ì½”ë“œì— ì¶”ê°€

const adminRouter = require('./routes/admin');
const analyticsRouter = require('./routes/analytics');

// ë¼ìš°í„° ë“±ë¡
app.use('/api/admin', adminRouter);
app.use('/api/analytics', analyticsRouter);
```

---

### Phase 4: ê´€ë¦¬ì í˜ì´ì§€ UI (50ë¶„)

#### 4.1. ë¡œê·¸ì¸ í˜ì´ì§€

**íŒŒì¼: `frontend/admin/login.html`**
```html
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ê´€ë¦¬ì ë¡œê·¸ì¸</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Malgun Gothic', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    .login-container {
      background: white;
      border-radius: 20px;
      padding: 40px;
      width: 90%;
      max-width: 400px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    }
    
    .login-title {
      font-size: 28px;
      font-weight: bold;
      margin-bottom: 10px;
      color: #333;
      text-align: center;
    }
    
    .login-subtitle {
      font-size: 14px;
      color: #999;
      text-align: center;
      margin-bottom: 30px;
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-label {
      display: block;
      margin-bottom: 8px;
      color: #666;
      font-size: 14px;
      font-weight: bold;
    }
    
    .form-input {
      width: 100%;
      padding: 15px;
      border: 2px solid #f0f0f0;
      border-radius: 10px;
      font-size: 16px;
      transition: border-color 0.3s;
    }
    
    .form-input:focus {
      outline: none;
      border-color: #667eea;
    }
    
    .login-btn {
      width: 100%;
      padding: 15px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: transform 0.2s;
    }
    
    .login-btn:hover {
      transform: translateY(-2px);
    }
    
    .login-btn:active {
      transform: translateY(0);
    }
    
    .error-message {
      color: #ff6b6b;
      font-size: 14px;
      margin-top: 10px;
      text-align: center;
      display: none;
    }
  </style>
</head>
<body>
  <div class="login-container">
    <div class="login-title">ğŸ” ê´€ë¦¬ì ë¡œê·¸ì¸</div>
    <div class="login-subtitle">ìš´ì„¸í”Œë«í¼ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</div>
    
    <form id="loginForm">
      <div class="form-group">
        <label class="form-label">ì•„ì´ë””</label>
        <input type="text" class="form-input" id="username" value="admin" readonly>
      </div>
      
      <div class="form-group">
        <label class="form-label">ë¹„ë°€ë²ˆí˜¸</label>
        <input type="password" class="form-input" id="password" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
      </div>
      
      <button type="submit" class="login-btn">ë¡œê·¸ì¸</button>
      
      <div class="error-message" id="errorMessage"></div>
    </form>
  </div>
  
  <script>
    document.getElementById('loginForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;
      const errorMessage = document.getElementById('errorMessage');
      
      try {
        const response = await fetch('http://localhost:3000/api/admin/login', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ username, password })
        });
        
        const data = await response.json();
        
        if (response.ok) {
          // í† í° ì €ì¥
          localStorage.setItem('adminToken', data.token);
          localStorage.setItem('adminUsername', data.username);
          
          // ëŒ€ì‹œë³´ë“œë¡œ ì´ë™
          window.location.href = 'dashboard.html';
        } else {
          errorMessage.textContent = data.error;
          errorMessage.style.display = 'block';
        }
      } catch (error) {
        errorMessage.textContent = 'ì„œë²„ ì—°ê²° ì‹¤íŒ¨';
        errorMessage.style.display = 'block';
      }
    });
  </script>
</body>
</html>
```

#### 4.2. ëŒ€ì‹œë³´ë“œ í˜ì´ì§€

**íŒŒì¼: `frontend/admin/dashboard.html`** (1/3)
```html
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Malgun Gothic', sans-serif;
      background: #f5f7fa;
    }
    
    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px 40px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .header-title {
      font-size: 24px;
      font-weight: bold;
    }
    
    .header-actions {
      display: flex;
      gap: 10px;
    }
    
    .logout-btn {
      padding: 10px 20px;
      background: rgba(255,255,255,0.2);
      border: none;
      border-radius: 8px;
      color: white;
      cursor: pointer;
      font-weight: bold;
    }
    
    .logout-btn:hover {
      background: rgba(255,255,255,0.3);
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 30px;
    }
    
    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .stat-card {
      background: white;
      border-radius: 15px;
      padding: 25px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .stat-label {
      font-size: 14px;
      color: #999;
      margin-bottom: 10px;
    }
    
    .stat-value {
      font-size: 36px;
      font-weight: bold;
      color: #333;
    }
    
    .stat-change {
      font-size: 12px;
      margin-top: 5px;
    }
    
    .stat-change.positive {
      color: #4caf50;
    }
    
    .stat-change.negative {
      color: #f44336;
    }
    
    .section-title {
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 15px;
      color: #333;
    }
    
    .chart-container {
      background: white;
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .settings-panel {
      background: white;
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .input-group {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }
    
    .input-field {
      flex: 1;
      padding: 12px;
      border: 2px solid #f0f0f0;
      border-radius: 8px;
      font-size: 14px;
    }
    
    .save-btn {
      padding: 12px 30px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
    }
    
    .save-btn:hover {
      opacity: 0.9;
    }
    
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
      display: none;
      z-index: 1000;
    }
    
    .notification.show {
      display: block;
      animation: slideIn 0.3s ease-out;
    }
    
    @keyframes slideIn {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <div class="header-title">ğŸ“Š ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</div>
    <div class="header-actions">
      <span id="lastUpdate">ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: ë¡œë”© ì¤‘...</span>
      <button class="logout-btn" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
    </div>
  </div>
  
  <div class="container">
    <!-- ì‹¤ì‹œê°„ í†µê³„ -->
    <div class="section-title">ğŸ”´ ì‹¤ì‹œê°„ í†µê³„ (ìë™ ê°±ì‹ )</div>
    <div class="dashboard-grid">
      <div class="stat-card">
        <div class="stat-label">ì˜¤ëŠ˜ ë°©ë¬¸ì</div>
        <div class="stat-value" id="visitorsToday">-</div>
        <div class="stat-change" id="visitorsChange"></div>
      </div>
      
      <div class="stat-card">
        <div class="stat-label">ì˜¤ëŠ˜ ì¿ íŒ¡ í´ë¦­</div>
        <div class="stat-value" id="clicksToday">-</div>
        <div class="stat-change" id="clicksChange"></div>
      </div>
      
      <div class="stat-card">
        <div class="stat-label">ì „í™˜ìœ¨</div>
        <div class="stat-value" id="conversionRate">-</div>
      </div>
      
      <div class="stat-card">
        <div class="stat-label">ì˜¤ëŠ˜ ì´ìš©ê¶Œ ì‚¬ìš©</div>
        <div class="stat-value" id="usageToday">-</div>
      </div>
    </div>
    
    <!-- ì¿ íŒ¡ ë§í¬ ê´€ë¦¬ -->
    <div class="settings-panel">
      <div class="section-title">ğŸ”— ì¿ íŒ¡ ë§í¬ ê´€ë¦¬</div>
      <div class="input-group">
        <input type="text" class="input-field" id="coupangLink" placeholder="ì¿ íŒ¡ ë§í¬ ì…ë ¥">
        <button class="save-btn" onclick="saveCoupangLink()">ì €ì¥</button>
      </div>
    </div>
    
    <!-- ë°©ë¬¸ì í†µê³„ ê·¸ë˜í”„ -->
    <div class="chart-container">
      <div class="section-title">ğŸ“ˆ ì¼ë³„ ë°©ë¬¸ì ì¶”ì´ (ìµœê·¼ 7ì¼)</div>
      <canvas id="visitorsChart"></canvas>
    </div>
    
    <!-- ì¿ íŒ¡ í´ë¦­ ê·¸ë˜í”„ -->
    <div class="chart-container">
      <div class="section-title">ğŸ”— ì¼ë³„ ì¿ íŒ¡ í´ë¦­ ì¶”ì´ (ìµœê·¼ 7ì¼)</div>
      <canvas id="coupangChart"></canvas>
    </div>
    
    <!-- ê¸°ëŠ¥ë³„ ì‚¬ìš© í†µê³„ -->
    <div class="chart-container">
      <div class="section-title">ğŸ¯ ê¸°ëŠ¥ë³„ ì´ìš©ê¶Œ ì‚¬ìš© ìˆœìœ„</div>
      <canvas id="featuresChart"></canvas>
    </div>
    
    <!-- ì‹œê°„ëŒ€ë³„ ë°©ë¬¸ ë¶„í¬ -->
    <div class="chart-container">
      <div class="section-title">â° ì‹œê°„ëŒ€ë³„ ë°©ë¬¸ ë¶„í¬</div>
      <canvas id="hourlyChart"></canvas>
    </div>
  </div>
  
  <!-- ì•Œë¦¼ -->
  <div class="notification" id="notification">
    <div id="notificationMessage"></div>
  </div>
  
  <script src="js/dashboard.js"></script>
</body>
</html>
```

#### 4.3. ëŒ€ì‹œë³´ë“œ JavaScript

**íŒŒì¼: `frontend/admin/js/dashboard.js`**
```javascript
// ì¸ì¦ í™•ì¸
function checkAuth() {
  const token = localStorage.getItem('adminToken');
  if (!token) {
    window.location.href = 'login.html';
    return false;
  }
  return token;
}

const token = checkAuth();

// API í˜¸ì¶œ í—¤ë”
const headers = {
  'Content-Type': 'application/json',
  'Authorization': `Bearer ${token}`
};

// ë¡œê·¸ì•„ì›ƒ
function logout() {
  localStorage.removeItem('adminToken');
  localStorage.removeItem('adminUsername');
  window.location.href = 'login.html';
}

// ì•Œë¦¼ í‘œì‹œ
function showNotification(message) {
  const notification = document.getElementById('notification');
  const notificationMessage = document.getElementById('notificationMessage');
  
  notificationMessage.textContent = message;
  notification.classList.add('show');
  
  setTimeout(() => {
    notification.classList.remove('show');
  }, 3000);
}

// ì‹¤ì‹œê°„ í†µê³„ ì—…ë°ì´íŠ¸
async function updateRealtimeStats() {
  try {
    const response = await fetch('http://localhost:3000/api/admin/stats/today', { headers });
    const data = await response.json();
    
    // ë°©ë¬¸ì
    document.getElementById('visitorsToday').textContent = data.visitorsToday;
    const visitorsChangeEl = document.getElementById('visitorsChange');
    visitorsChangeEl.textContent = `ì „ì¼ ëŒ€ë¹„ ${data.visitorsChange}%`;
    visitorsChangeEl.className = `stat-change ${data.visitorsChange >= 0 ? 'positive' : 'negative'}`;
    
    // í´ë¦­
    document.getElementById('clicksToday').textContent = data.clicksToday;
    const clicksChangeEl = document.getElementById('clicksChange');
    clicksChangeEl.textContent = `ì „ì¼ ëŒ€ë¹„ ${data.clicksChange}%`;
    clicksChangeEl.className = `stat-change ${data.clicksChange >= 0 ? 'positive' : 'negative'}`;
    
    // ì „í™˜ìœ¨
    document.getElementById('conversionRate').textContent = `${data.conversionRate}%`;
    
    // ì´ìš©ê¶Œ ì‚¬ìš©
    document.getElementById('usageToday').textContent = data.usageToday;
    
    // ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸ ì‹œê°„
    document.getElementById('lastUpdate').textContent = 
      `ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: ${new Date().toLocaleTimeString('ko-KR')}`;
    
    // ì•Œë¦¼ ì²´í¬ (ë°©ë¬¸ì 100ëª… ì´ìƒ)
    if (data.visitorsToday >= 100 && !window.notified100) {
      showNotification('ğŸ‰ ì˜¤ëŠ˜ ë°©ë¬¸ì 100ëª… ë‹¬ì„±!');
      window.notified100 = true;
    }
  } catch (error) {
    console.error('ì‹¤ì‹œê°„ í†µê³„ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:', error);
  }
}

// ì¿ íŒ¡ ë§í¬ ë¡œë“œ
async function loadCoupangLink() {
  try {
    const response = await fetch('http://localhost:3000/api/admin/settings/coupang-link', { headers });
    const data = await response.json();
    document.getElementById('coupangLink').value = data.coupangLink;
  } catch (error) {
    console.error('ì¿ íŒ¡ ë§í¬ ë¡œë“œ ì‹¤íŒ¨:', error);
  }
}

// ì¿ íŒ¡ ë§í¬ ì €ì¥
async function saveCoupangLink() {
  const coupangLink = document.getElementById('coupangLink').value;
  
  try {
    const response = await fetch('http://localhost:3000/api/admin/settings/coupang-link', {
      method: 'PUT',
      headers,
      body: JSON.stringify({ coupangLink })
    });
    
    const data = await response.json();
    
    if (response.ok) {
      showNotification('âœ… ì¿ íŒ¡ ë§í¬ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
    } else {
      alert(data.error);
    }
  } catch (error) {
    alert('ì €ì¥ ì‹¤íŒ¨: ' + error.message);
  }
}

// ë°©ë¬¸ì í†µê³„ ì°¨íŠ¸
async function loadVisitorsChart() {
  try {
    const response = await fetch('http://localhost:3000/api/admin/stats/visitors?days=7', { headers });
    const data = await response.json();
    
    const ctx = document.getElementById('visitorsChart').getContext('2d');
    new Chart(ctx, {
      type: 'line',
      data: {
        labels: data.dailyVisitors.map(d => d._id),
        datasets: [{
          label: 'ë°©ë¬¸ì ìˆ˜',
          data: data.dailyVisitors.map(d => d.count),
          borderColor: '#667eea',
          backgroundColor: 'rgba(102, 126, 234, 0.1)',
          tension: 0.4
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display: false }
        }
      }
    });
  } catch (error) {
    console.error('ë°©ë¬¸ì ì°¨íŠ¸ ë¡œë“œ ì‹¤íŒ¨:', error);
  }
}

// ì¿ íŒ¡ í´ë¦­ ì°¨íŠ¸
async function loadCoupangChart() {
  try {
    const response = await fetch('http://localhost:3000/api/admin/stats/coupang?days=7', { headers });
    const data = await response.json();
    
    const ctx = document.getElementById('coupangChart').getContext('2d');
    new Chart(ctx, {
      type: 'bar',
      data: {
        labels: data.dailyClicks.map(d => d._id),
        datasets: [{
          label: 'í´ë¦­ ìˆ˜',
          data: data.dailyClicks.map(d => d.count),
          backgroundColor: '#ff6b6b'
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display: false }
        }
      }
    });
  } catch (error) {
    console.error('ì¿ íŒ¡ ì°¨íŠ¸ ë¡œë“œ ì‹¤íŒ¨:', error);
  }
}

// ê¸°ëŠ¥ë³„ ì‚¬ìš© ì°¨íŠ¸
async function loadFeaturesChart() {
  try {
    const response = await fetch('http://localhost:3000/api/admin/stats/features', { headers });
    const data = await response.json();
    
    const ctx = document.getElementById('featuresChart').getContext('2d');
    new Chart(ctx, {
      type: 'pie',
      data: {
        labels: data.featureUsage.map(f => f._id),
        datasets: [{
          data: data.featureUsage.map(f => f.count),
          backgroundColor: [
            '#667eea', '#764ba2', '#f093fb', '#ff6b6b',
            '#4caf50', '#ffc107', '#00bcd4', '#ff9800'
          ]
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { position: 'right' }
        }
      }
    });
  } catch (error) {
    console.error('ê¸°ëŠ¥ ì°¨íŠ¸ ë¡œë“œ ì‹¤íŒ¨:', error);
  }
}

// ì‹œê°„ëŒ€ë³„ ì°¨íŠ¸
async function loadHourlyChart() {
  try {
    const response = await fetch('http://localhost:3000/api/admin/stats/visitors', { headers });
    const data = await response.json();
    
    const ctx = document.getElementById('hourlyChart').getContext('2d');
    new Chart(ctx, {
      type: 'bar',
      data: {
        labels: Array.from({length: 24}, (_, i) => `${i}ì‹œ`),
        datasets: [{
          label: 'ë°©ë¬¸ì ìˆ˜',
          data: data.hourlyDistribution.map(h => h.count),
          backgroundColor: '#4caf50'
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display: false }
        }
      }
    });
  } catch (error) {
    console.error('ì‹œê°„ëŒ€ë³„ ì°¨íŠ¸ ë¡œë“œ ì‹¤íŒ¨:', error);
  }
}

// ì´ˆê¸° ë¡œë“œ
document.addEventListener('DOMContentLoaded', () => {
  updateRealtimeStats();
  loadCoupangLink();
  loadVisitorsChart();
  loadCoupangChart();
  loadFeaturesChart();
  loadHourlyChart();
  
  // 5ì´ˆë§ˆë‹¤ ì‹¤ì‹œê°„ í†µê³„ ê°±ì‹ 
  setInterval(updateRealtimeStats, 5000);
});
```

---

### Phase 5: í…ŒìŠ¤íŠ¸ ë° ë°°í¬ (20ë¶„)

#### 5.1. ì´ˆê¸° ë°ì´í„° ìƒì„± (í…ŒìŠ¤íŠ¸ìš©)
```bash
cd C:\xampp\htdocs\mysite\ìš´ì„¸í”Œë«í¼\backend
node scripts/init-admin.js
```

#### 5.2. ì„œë²„ ì¬ì‹œì‘
```bash
cd C:\xampp\htdocs\mysite\ìš´ì„¸í”Œë«í¼\backend
npm start
```

#### 5.3. ê´€ë¦¬ì í˜ì´ì§€ ì ‘ì†
```
http://localhost:3000/admin/login.html
```

**ë¡œê·¸ì¸ ì •ë³´:**
- ID: `admin`
- ë¹„ë°€ë²ˆí˜¸: `dkssud11@@`

---

## ğŸ¯ ì‘ì—… ì²´í¬ë¦¬ìŠ¤íŠ¸

### Phase 1: ë°ì´í„°ë² ì´ìŠ¤
- [ ] `init-admin.js` ì‘ì„±
- [ ] ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
- [ ] ê´€ë¦¬ì ê³„ì • ìƒì„± í™•ì¸

### Phase 2: í†µê³„ ìˆ˜ì§‘
- [ ] `analytics-tracker.js` ì‘ì„±
- [ ] `index.html`ì— ì¶”ì  ì½”ë“œ ì¶”ê°€
- [ ] `ticket-system.js` ìˆ˜ì •

### Phase 3: ë°±ì—”ë“œ API
- [ ] `auth.js` ë¯¸ë“¤ì›¨ì–´ ì‘ì„±
- [ ] `admin.js` ë¼ìš°í„° ì‘ì„±
- [ ] `analytics.js` ë¼ìš°í„° ì‘ì„±
- [ ] `server.js` ìˆ˜ì •

### Phase 4: í”„ë¡ íŠ¸ì—”ë“œ
- [ ] `login.html` ì‘ì„±
- [ ] `dashboard.html` ì‘ì„±
- [ ] `dashboard.js` ì‘ì„±

### Phase 5: í…ŒìŠ¤íŠ¸
- [ ] ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸
- [ ] ëŒ€ì‹œë³´ë“œ ì ‘ì† í…ŒìŠ¤íŠ¸
- [ ] ì‹¤ì‹œê°„ í†µê³„ í™•ì¸
- [ ] ì¿ íŒ¡ ë§í¬ ìˆ˜ì • í…ŒìŠ¤íŠ¸
- [ ] ì°¨íŠ¸ í‘œì‹œ í™•ì¸

---

## ğŸ”’ ë³´ì•ˆ ì£¼ì˜ì‚¬í•­

1. **JWT SECRET_KEY ë³€ê²½ í•„ìˆ˜**
   - `backend/middleware/auth.js`ì˜ `SECRET_KEY` ë³€ê²½

2. **CORS ì„¤ì • í™•ì¸**
   - í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” íŠ¹ì • ë„ë©”ì¸ë§Œ í—ˆìš©

3. **ë¹„ë°€ë²ˆí˜¸ í•´ì‹œ ê²€ì¦**
   - bcrypt ì‚¬ìš© í™•ì¸

4. **HTTPS ì‚¬ìš© ê¶Œì¥**
   - í”„ë¡œë•ì…˜ ë°°í¬ ì‹œ í•„ìˆ˜

---

## ğŸ“Š ì˜ˆìƒ ì‘ì—… ì‹œê°„

- Phase 1: 10ë¶„
- Phase 2: 30ë¶„
- Phase 3: 40ë¶„
- Phase 4: 50ë¶„
- Phase 5: 20ë¶„

**ì´ ì˜ˆìƒ ì‹œê°„: ì•½ 2.5ì‹œê°„**

---

## ğŸ’¡ ì¶”ê°€ ê°œì„  ì•„ì´ë””ì–´

1. **ëŒ€ì‹œë³´ë“œ í•„í„°ë§**
   - ê¸°ê°„ë³„ ì¡°íšŒ (ì¼/ì£¼/ì›”)
   
2. **ì—‘ì…€ ë‹¤ìš´ë¡œë“œ ê³ ë„í™”**
   - ê·¸ë˜í”„ í¬í•¨ ë¦¬í¬íŠ¸

3. **ì´ë©”ì¼ ì•Œë¦¼**
   - ì¼ì¼ ë¦¬í¬íŠ¸ ìë™ ë°œì†¡

4. **ëª¨ë°”ì¼ ìµœì í™”**
   - ë°˜ì‘í˜• ëŒ€ì‹œë³´ë“œ

5. **ë” ë§ì€ í†µê³„**
   - ì‚¬ìš©ì ì²´ë¥˜ ì‹œê°„
   - ì´íƒˆë¥  ë¶„ì„

---

## ğŸ†˜ ë¬¸ì œ í•´ê²°

### ë¬¸ì œ 1: MongoDB ì—°ê²° ì‹¤íŒ¨
```
í•´ê²°: MongoDB ì„œë²„ ì‹¤í–‰ í™•ì¸
net start MongoDB
```

### ë¬¸ì œ 2: CORS ì—ëŸ¬
```javascript
// server.jsì— ì¶”ê°€
const cors = require('cors');
app.use(cors());
```

### ë¬¸ì œ 3: ì°¨íŠ¸ê°€ ì•ˆ ë³´ì„
```
í•´ê²°: Chart.js CDN í™•ì¸
https://cdn.jsdelivr.net/npm/chart.js
```

---

## ğŸ“ ì‘ì—… ì™„ë£Œ í›„

1. **GitHubì— ì»¤ë°‹**
```bash
git add .
git commit -m "feat: ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ êµ¬í˜„"
git push origin main
```

2. **ë¬¸ì„œ ì—…ë°ì´íŠ¸**
   - `docs/project_plan.md`ì— ì™„ë£Œ ê¸°ë¡

3. **í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±**
   - ë°©ë¬¸ì/í´ë¦­/ì‚¬ìš© ë°ì´í„° í…ŒìŠ¤íŠ¸

---

**ì‘ì—… ì‹œì‘ ì „ ì´ ë¬¸ì„œë¥¼ ì •ë…í•˜ê³  ë‹¨ê³„ë³„ë¡œ ì§„í–‰í•˜ì„¸ìš”!** ğŸš€
