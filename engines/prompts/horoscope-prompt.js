/**
 * 별자리 운세 Claude API 프롬프트 생성기
 * 
 * 별자리 운세는 400-600자의 긴 스토리텔링 형식으로 제공
 * 하루의 흐름을 따라 감성적이고 따뜻한 조언 전달
 */

/**
 * 별자리별 특성 정보
 */
const zodiacCharacteristics = {
  '물병자리': '독립적이고 창의적이며 인도주의적 성향이 강합니다. 새로운 것을 추구하고 자유로운 사고를 좋아합니다.',
  '물고기자리': '감성적이고 직관적이며 공감 능력이 뛰어납니다. 예술적 감각이 있고 타인을 잘 이해합니다.',
  '양자리': '활동적이고 열정적이며 리더십이 강합니다. 도전을 즐기고 적극적으로 앞장서는 성향입니다.',
  '황소자리': '안정을 추구하고 인내심이 강합니다. 실용적이고 꾸준하며 신뢰를 중요시합니다.',
  '쌍둥이자리': '호기심이 많고 소통을 즐깁니다. 다재다능하고 빠른 적응력을 가지고 있습니다.',
  '게자리': '가족적이고 보호본능이 강합니다. 감수성이 풍부하고 주변 사람을 잘 챙깁니다.',
  '사자자리': '자신감 있고 관대합니다. 타고난 리더 기질과 따뜻한 마음을 동시에 가지고 있습니다.',
  '처녀자리': '꼼꼼하고 분석적입니다. 완벽을 추구하며 실용적이고 책임감이 강합니다.',
  '천칭자리': '조화와 균형을 추구합니다. 사교적이고 공정하며 아름다움을 사랑합니다.',
  '전갈자리': '열정적이고 집중력이 강합니다. 깊이 있는 감정과 강한 의지를 가지고 있습니다.',
  '사수자리': '자유롭고 낙천적입니다. 모험을 즐기고 긍정적인 에너지가 넘칩니다.',
  '염소자리': '책임감 있고 목표지향적입니다. 인내심이 강하고 현실적인 성향을 가지고 있습니다.'
};

/**
 * 별자리 운세 프롬프트 생성
 * 
 * @param {Object} data - 별자리 운세 데이터
 * @param {string} data.sign - 별자리 한글명 (예: "물병자리")
 * @param {string} data.signEn - 별자리 영문명 (예: "Aquarius")
 * @param {string} data.symbol - 별자리 심볼 (예: "♒")
 * @param {string} data.date - 날짜 (예: "2025-10-02")
 * @param {string} data.level - 운세 등급 (예: "매우 좋음")
 * @param {number} data.score - 운세 점수 (50-95)
 * @returns {string} Claude API용 프롬프트
 */
function generateHoroscopePrompt(data) {
  const { sign, signEn, symbol, date, level, score } = data;
  
  // 별자리 특성 가져오기
  const characteristic = zodiacCharacteristics[sign] || '독특한 매력을 가진 별자리입니다.';
  
  const prompt = `당신은 30년 경력의 별자리 운세 전문가입니다. 
55-65세 여성 고객에게 따뜻하고 공감하는 어조로 하루의 이야기를 들려주듯 조언합니다.

# 별자리 정보
- 별자리: ${sign} (${signEn}) ${symbol}
- 오늘 날짜: ${date}
- 운세 등급: ${level}
- 운세 점수: ${score}점 / 100점
- 별자리 특성: ${characteristic}

# 작성 지침
⭐ 별자리 운세는 '오늘 하루의 스토리'를 전달합니다.
⭐ 반드시 400-600자로 충분히 디테일하게 작성해주세요.
⭐ 아침부터 저녁까지 하루의 흐름을 자연스럽게 담아주세요.
⭐ 구체적인 상황과 조언을 포함해서 생생하게 전달하세요.

# 포함할 내용 (자연스럽게 녹여서)
1. 오늘의 전반적인 에너지와 분위기
   - "오늘은 ~한 기운이 흐릅니다"
   - "아침부터 ~한 느낌이 들 거예요"

2. 시간대별 흐름
   - 오전: 어떤 일이 일어날 수 있는지
   - 오후: 어떤 기회나 상황이 있을지
   - 저녁: 마무리는 어떻게 하면 좋을지

3. 대인관계의 흐름
   - 가족, 친구, 이웃과의 상호작용
   - 전화, 만남, 대화에서 주의할 점

4. 마음가짐과 감정
   - 오늘 느낄 수 있는 감정
   - 어떤 태도로 하루를 보내면 좋을지

5. 구체적인 조언
   - "~한 일은 오후로 미루세요"
   - "오늘은 ~하면 좋은 결과가 있을 거예요"

6. 긍정적인 마무리
   - 희망과 격려의 메시지
   - 작은 행복을 찾는 지혜

# 어조 및 스타일
- 마치 친한 언니나 친구가 차 한 잔 하며 조언하는 느낌
- "~하세요", "~해보세요", "~할 거예요" 친근한 말투
- 추상적이지 않고 구체적인 예시 포함
- 희망적이고 따뜻한 톤 유지
- 너무 점쟁이 같지 않게, 일상적이고 공감 가능하게

# 주의사항
❌ 너무 짧게 쓰지 마세요! 반드시 400자 이상!
❌ 추상적인 표현만 나열하지 마세요!
❌ 부정적이거나 불안하게 만들지 마세요!
✅ 구체적인 상황을 상상하며 쓰세요!
✅ 하루의 '이야기'처럼 흐름이 있어야 합니다!
✅ 읽고 나면 "아, 오늘 이렇게 보내면 되겠구나" 느낌!

# 요청사항
다음 JSON 형식으로 작성해주세요:

{
  "운세": "400-600자의 오늘 하루 운세. 스토리텔링 형식으로 풍부하게 작성. 아침-오후-저녁의 흐름을 담아서.",
  "핵심키워드": "오늘의 핵심 단어 3개를 쉼표로 구분 (예: 여유, 소통, 정리)",
  "행운의색": "구체적인 색상 (예: 하늘색, 연두색, 베이지, 라벤더)",
  "행운의숫자": "1-100 사이 숫자 하나",
  "행운의아이템": "일상에서 쉽게 접할 수 있는 아이템 (예: 따뜻한 차, 가죽지갑, 생선요리, 크로스백, 조명, 핸드크림)",
  "조심할시간": "주의가 필요한 시간대 (예: 오후 3-5시) 또는 특별히 없으면 null"
}

⭐⭐⭐ 중요: 운세 텍스트는 반드시 400자 이상 600자 이하로 작성하세요! ⭐⭐⭐

예시 구조 (참고만 하세요):
"오늘 ${sign} 당신에게는 [전반적 분위기]. 아침부터 [아침 상황]. 
특히 오전에는 [오전 조언]. 오후에는 [오후 기회]. 
다만 [주의할 점]. 저녁에는 [저녁 마무리]. 
오늘 하루는 [긍정적 마무리]."`;

  return prompt;
}

module.exports = {
  generateHoroscopePrompt
};
