# 💰 운세 플랫폼 비용 분석 (일 1,000명 기준)

## 📊 예상 사용량 계산

### 사용자 행동 패턴 가정
```
하루 방문자: 1,000명
1인당 평균 행동:
- 페이지 로드: 3회
- 운세 생성: 2회 (사주 1회 + 로또/토정비결 1회)
- API 호출: 평균 5회
```

### 총 리소스 사용량 (일별)
```
페이지 뷰: 1,000명 × 3 = 3,000 PV
운세 생성: 1,000명 × 2 = 2,000회
API 호출: 1,000명 × 5 = 5,000회
Claude API: 2,000회 (운세 생성)
DB 읽기: 5,000회
DB 쓰기: 2,000회
```

---

## 💸 각 서비스별 비용 분석

### 1️⃣ **Render (백엔드 서버)**

#### 무료 플랜 (현재)
```yaml
가격: $0/월
제한사항:
  - 750시간/월 (충분함)
  - 15분 비활동 시 슬립
  - RAM: 512MB
  - 공유 CPU
  
성능:
  - Cold Start: 30-60초 😱
  - 따뜻한 상태: < 1초 ✅
  
예상 문제:
  - ❌ 첫 요청마다 30초 대기
  - ❌ 피크 타임 성능 저하
  - ❌ 동시 접속 50명 이상 시 느려짐
```

#### Starter 플랜 (권장)
```yaml
가격: $7/월 ($84/년)
성능 개선:
  - ✅ Cold Start 없음 (24/7 활성)
  - ✅ RAM: 512MB (동일)
  - ✅ 항상 빠른 응답
  - ✅ 동시 접속 100-200명 처리
  
ROI 계산:
  - 월 $7 = 일 $0.23
  - 방문자당 비용: $0.23 ÷ 1,000명 = $0.00023
  - 1회 운세당: $0.00012
```

#### Standard 플랜 (성장 시)
```yaml
가격: $25/월 ($300/년)
성능:
  - RAM: 2GB (4배)
  - 전용 CPU
  - 동시 접속 500-1,000명
  
권장 시점: 일 5,000명 이상
```

---

### 2️⃣ **Vercel (프론트엔드)**

#### Hobby 플랜 (현재)
```yaml
가격: $0/월
제한사항:
  - 대역폭: 100GB/월
  - 서버리스 함수: 100시간/월
  - 빌드: 6,000분/월
  
사용량 계산:
  - 페이지 크기: 평균 500KB (HTML+CSS+JS)
  - 일 3,000 PV × 500KB = 1.5GB/일
  - 월 사용량: 1.5GB × 30 = 45GB/월
  
결론: ✅ 무료 플랜으로 충분 (45GB < 100GB)
```

#### Pro 플랜 (필요 시)
```yaml
가격: $20/월 ($240/년)
제한:
  - 대역폭: 1TB/월 (20배)
  - 우선 빌드
  - 팀 협업
  
권장 시점: 일 5,000명 이상 또는 팀 작업 시
```

---

### 3️⃣ **MongoDB Atlas (데이터베이스)**

#### M0 Free Tier (현재)
```yaml
가격: $0/월
제한사항:
  - 저장공간: 512MB
  - 공유 클러스터
  - 연결: 500개 동시
  - RAM: 공유
  
사용량 예측:
  데이터 구조:
    - 사용자당 평균 데이터: 5KB
      * 사주 정보: 2KB
      * 이용권 기록: 1KB
      * 운세 결과: 2KB
  
  저장공간 계산:
    - 1,000명/일 × 5KB = 5MB/일
    - 월 누적: 5MB × 30 = 150MB/월
    - 512MB 도달: 약 3-4개월
  
  동시 연결:
    - 피크 타임 동시 접속: 50-100명
    - 500개 제한으로 충분 ✅
  
결론: ✅ 3-4개월은 무료 플랜 사용 가능
```

#### M10 Shared (권장 업그레이드)
```yaml
가격: $9/월 ($108/년)
성능 개선:
  - 저장공간: 10GB (20배)
  - 전용 RAM: 2GB
  - 백업 가능
  - 더 빠른 쿼리
  - 99.95% Uptime SLA
  
저장공간 수명:
  - 10GB ÷ 5MB/일 = 2,000일 (5년 이상)
  
권장 시점: 
  - 저장공간 400MB 도달 시
  - 또는 성능 이슈 발생 시
```

#### M20 (성장 시)
```yaml
가격: $27/월 ($324/년)
성능:
  - 저장공간: 20GB
  - RAM: 4GB
  - 더 강력한 CPU
  
권장 시점: 일 10,000명 이상
```

---

### 4️⃣ **Claude API (AI 운세 생성)**

#### 사용량 계산
```python
# 1회 운세 생성당
입력 토큰: 약 500 tokens (사용자 정보 + 프롬프트)
출력 토큰: 약 1,500 tokens (운세 결과)

# 일 2,000회 운세 생성
일별 토큰:
  - 입력: 500 × 2,000 = 1,000,000 tokens (1M)
  - 출력: 1,500 × 2,000 = 3,000,000 tokens (3M)

# 월별 토큰 (30일)
월별 토큰:
  - 입력: 1M × 30 = 30M tokens
  - 출력: 3M × 30 = 90M tokens
```

#### Claude 3 Haiku (현재 사용 중)
```yaml
가격:
  - 입력: $0.25 / 1M tokens
  - 출력: $1.25 / 1M tokens

월별 비용 계산:
  - 입력 비용: 30M × $0.25 = $7.50
  - 출력 비용: 90M × $1.25 = $112.50
  - 총 비용: $120/월 ($1,440/년)
  
1회 운세당 비용: $120 ÷ 60,000회 = $0.002
```

#### Claude 3.5 Sonnet (업그레이드 옵션)
```yaml
가격:
  - 입력: $3 / 1M tokens
  - 출력: $15 / 1M tokens

월별 비용:
  - 입력: 30M × $3 = $90
  - 출력: 90M × $15 = $1,350
  - 총 비용: $1,440/월 ($17,280/년)

결론: ❌ 너무 비쌈 (Haiku 사용 권장)
```

---

## 🎯 **추천 요금제 (일 1,000명 기준)**

### 📅 시나리오 1: 완전 무료 (현재 상태 유지)

```yaml
총 비용: $120/월 (Claude API만)

서비스별:
  - Render: $0 (무료 + UptimeRobot)
  - Vercel: $0 (무료)
  - MongoDB: $0 (무료, 3-4개월)
  - Claude API: $120 (필수 비용)

문제점:
  ❌ Render Cold Start (30초 대기)
  ❌ MongoDB 4개월 후 업그레이드 필요
  ⚠️ 피크 타임 성능 저하

장점:
  ✅ 최소 비용
  ✅ 서비스 검증 가능
```

**비용 절감 팁:**
```javascript
// 캐싱으로 Claude API 호출 50% 줄이기
// 같은 생일 + 성별 조합은 24시간 캐시
→ API 비용: $120 → $60/월
```

---

### 📅 시나리오 2: 최소 유료 (권장) ⭐

```yaml
총 비용: $136/월 ($1,632/년)

서비스별:
  - Render Starter: $7/월
  - Vercel Hobby: $0/월 (무료)
  - MongoDB M10: $9/월
  - Claude API: $120/월

개선사항:
  ✅ Cold Start 제거 (즉시 응답)
  ✅ 안정적인 DB 성능
  ✅ 5년간 DB 걱정 없음
  ✅ 백업 자동화

ROI 계산:
  - 월 $136 = 일 $4.53
  - 방문자당: $4.53 ÷ 1,000명 = $0.0045
  - 1회 운세당: $0.0023
```

---

### 📅 시나리오 3: 최적 성능

```yaml
총 비용: $172/월 ($2,064/년)

서비스별:
  - Render Standard: $25/월
  - Vercel Pro: $20/월
  - MongoDB M10: $9/월
  - Claude API: $120/월 (캐싱으로 $60)
  - 실제 합계: $114/월

권장 시점: 일 3,000명 이상
```

---

## 💡 **단계별 업그레이드 전략**

### Phase 1: 완전 무료 (현재)
```
대상: 일 0-500명
비용: $60-120/월 (Claude만)
기간: 서비스 시작 ~ 3개월

해야 할 일:
1. UptimeRobot 설정 (Cold Start 최소화)
2. 캐싱 시스템 구축 (API 비용 50% 절감)
3. MongoDB 사용량 모니터링
```

### Phase 2: 최소 유료 (권장)
```
대상: 일 500-2,000명
비용: $76-136/월
시작 시점: 
  - MongoDB 400MB 도달 OR
  - Cold Start 불만 접수 OR
  - 3개월 후

업그레이드 순서:
1. MongoDB M10 ($9) - 저장공간 확보
2. Render Starter ($7) - 성능 개선
```

### Phase 3: 성장 단계
```
대상: 일 2,000-5,000명
비용: $150-200/월
추가 업그레이드:
  - Vercel Pro ($20) - 대역폭 확보
  - 또는 Render Standard ($25) - 동시 접속 증가
```

### Phase 4: 스케일업
```
대상: 일 5,000-10,000명
비용: $300-400/월
업그레이드:
  - Render Standard: $25
  - Vercel Pro: $20
  - MongoDB M20: $27
  - Claude API: $240 (캐싱 후)
```

---

## 📊 **수익화 계산 (참고)**

### 광고 수익 (Adsense)
```
RPM (1,000 노출당): $1-3
일 3,000 PV × $2 RPM = $6/일
월 수익: $6 × 30 = $180/월

손익분기점:
  - 시나리오 1 (완전 무료): $120/월
    → 필요 PV: 2,000 PV/일
  
  - 시나리오 2 (최소 유료): $136/월
    → 필요 PV: 2,300 PV/일
```

### 프리미엄 기능 (유료 이용권)
```
전환율: 2% (100명 중 2명 결제)
이용권 가격: ₩1,000 (10개)

일 1,000명 × 2% = 20명 결제
일 수익: 20명 × ₩1,000 = ₩20,000 (약 $15)
월 수익: $15 × 30 = $450/월

순이익: $450 - $136 = $314/월 ✅
```

---

## 🎯 **최종 추천**

### 즉시 적용 (무료)
```bash
1. UptimeRobot 설정 (5분)
2. Claude API 캐싱 구현 (30분)
3. MongoDB 사용량 모니터링 설정
```

### 1개월 내 (트래픽 확인 후)
```bash
IF 일 평균 > 300명:
  → MongoDB M10 업그레이드 ($9/월)
  
IF Cold Start 불만 > 5건/일:
  → Render Starter 업그레이드 ($7/월)
```

### 3개월 내 (성장 시)
```bash
IF 일 평균 > 1,000명:
  → 시나리오 2 완전 적용 ($136/월)
  
IF 일 평균 > 3,000명:
  → Vercel Pro 추가 ($20/월)
```

---

## 📝 **모니터링 체크리스트**

### 매일 확인
```
□ MongoDB 저장공간 (< 400MB 유지)
□ Render Cold Start 발생 횟수
□ Claude API 사용량
□ 사용자 불만 (속도 관련)
```

### 매주 확인
```
□ 일 평균 방문자 수
□ 피크 타임 동시 접속자
□ API 응답 속도
□ DB 쿼리 성능
```

### 매월 확인
```
□ 총 비용 계산
□ 수익 대비 비용 (ROI)
□ 업그레이드 필요성 검토
□ 사용자 증가율
```

---

## 💰 **예산 요약**

| 단계 | 일 방문자 | 월 비용 | 주요 서비스 |
|------|----------|---------|-------------|
| **시작** | 0-500명 | $60-120 | 전부 무료 + Claude |
| **검증** | 500-1,000명 | $76-136 | MongoDB M10 + Claude |
| **성장** | 1,000-2,000명 | $136-156 | + Render Starter |
| **확장** | 2,000-5,000명 | $156-200 | + Vercel Pro |
| **스케일** | 5,000-10,000명 | $300-400 | 전부 유료 |

---

**결론: 일 1,000명 기준으로 월 $136 ($1,632/년) 권장합니다.** ✅

하지만 처음 3개월은 무료 플랜으로 시작하고, 실제 트래픽을 보면서 단계적으로 업그레이드하는 것이 가장 현명합니다!