/**
 * 별자리 운세 Claude API 프롬프트 생성기
 * 
 * 별자리 운세는 200-400자의 간결한 스토리텔링 형식으로 제공
 * 핵심만 담아 감성적이고 따뜻한 조언 전달
 */

/**
 * 별자리별 특성 정보
 */
const zodiacCharacteristics = {
  '물병자리': '독립적이고 창의적이며 인도주의적 성향이 강합니다. 새로운 것을 추구하고 자유로운 사고를 좋아합니다.',
  '물고기자리': '감성적이고 직관적이며 공감 능력이 뛰어납니다. 예술적 감각이 있고 타인을 잘 이해합니다.',
  '양자리': '활동적이고 열정적이며 리더십이 강합니다. 도전을 즐기고 적극적으로 앞장서는 성향입니다.',
  '황소자리': '안정을 추구하고 인내심이 강합니다. 실용적이고 꾸준하며 신뢰를 중요시합니다.',
  '쌍둥이자리': '호기심이 많고 소통을 즐깁니다. 다재다능하고 빠른 적응력을 가지고 있습니다.',
  '게자리': '가족적이고 보호본능이 강합니다. 감수성이 풍부하고 주변 사람을 잘 챙깁니다.',
  '사자자리': '자신감 있고 관대합니다. 타고난 리더 기질과 따뜻한 마음을 동시에 가지고 있습니다.',
  '처녀자리': '꼼꼼하고 분석적입니다. 완벽을 추구하며 실용적이고 책임감이 강합니다.',
  '천칭자리': '조화와 균형을 추구합니다. 사교적이고 공정하며 아름다움을 사랑합니다.',
  '전갈자리': '열정적이고 집중력이 강합니다. 깊이 있는 감정과 강한 의지를 가지고 있습니다.',
  '사수자리': '자유롭고 낙천적입니다. 모험을 즐기고 긍정적인 에너지가 넘칩니다.',
  '염소자리': '책임감 있고 목표지향적입니다. 인내심이 강하고 현실적인 성향을 가지고 있습니다.'
};

/**
 * 별자리 운세 프롬프트 생성
 * 
 * @param {Object} data - 별자리 운세 데이터
 * @param {string} data.sign - 별자리 한글명 (예: "물병자리")
 * @param {string} data.signEn - 별자리 영문명 (예: "Aquarius")
 * @param {string} data.symbol - 별자리 심볼 (예: "♒")
 * @param {string} data.date - 날짜 (예: "2025-10-02")
 * @param {string} data.level - 운세 등급 (예: "매우 좋음")
 * @param {number} data.score - 운세 점수 (50-95)
 * @returns {string} Claude API용 프롬프트
 */
function generateHoroscopePrompt(data) {
  const { sign, signEn, symbol, date, level, score } = data;
  
  // 별자리 특성 가져오기
  const characteristic = zodiacCharacteristics[sign] || '독특한 매력을 가진 별자리입니다.';
  
  const prompt = `당신은 30년 경력의 별자리 운세 전문가입니다. 
55-65세 여성 고객에게 따뜻하고 공감하는 어조로 하루의 이야기를 들려주듯 조언합니다.

# 별자리 정보
- 별자리: ${sign} (${signEn}) ${symbol}
- 오늘 날짜: ${date}
- 운세 등급: ${level}
- 운세 점수: ${score}점 / 100점
- 별자리 특성: ${characteristic}

# ⭐⭐⭐ 절대 준수 사항 ⭐⭐⭐
운세 텍스트는 반드시 220-330자 사이로 작성해야 합니다!
330자를 절대 초과하지 마세요!
약 9-11문장 정도가 적당합니다!

# 작성 지침
⭐ 별자리 운세는 간결하고 핵심적인 내용만 담아야 합니다.
⭐ 220-330자 사이로 작성 (330자 절대 초과 금지!)
⭐ 오전-오후-저녁을 각각 2문장씩만 작성하세요.
⭐ 불필요한 수식어를 빼고 핵심만 전달하세요.

# 포함할 내용 (간결하게)
1. 오늘의 전반적인 에너지 (1-2문장)
   - "오늘은 ~한 기운이 흐릅니다"

2. 오전 시간대 (2문장)
   - 오전에 하면 좋은 일
   
3. 오후 시간대 (2문장)
   - 오후 조언

4. 저녁 시간대 (2문장)
   - 저녁 마무리 방법

5. 긍정적인 마무리 (1-2문장)
   - 짧은 격려 메시지

# 어조 및 스타일
- 간결하고 명확하게
- "~하세요", "~해보세요" 친근한 말투
- 불필요한 장황한 설명 제거
- 희망적이고 따뜻한 톤 유지

# 주의사항
❌ 330자 초과 절대 금지!
❌ 장황하게 설명하지 마세요!
❌ 부정적이거나 불안하게 만들지 마세요!
✅ 9-11문장으로 간결하게!
✅ 핵심만 전달!
✅ 명확하고 실용적인 조언!

# 요청사항
다음 JSON 형식으로 작성해주세요:

{
  "운세": "220-330자로 작성! 오전(2문장) + 오후(2문장) + 저녁(2문장) + 마무리(1-2문장). 간결하게!",
  "핵심키워드": "오늘의 핵심 단어 3개를 쉼표로 구분 (예: 여유, 소통, 정리)",
  "행운의색": "구체적인 색상 (예: 하늘색, 연두색, 베이지, 라벤더)",
  "행운의숫자": "1-100 사이 숫자 하나",
  "행운의아이템": "일상에서 쉽게 접할 수 있는 아이템 (예: 따뜻한 차, 가죽지갑, 생선요리, 크로스백, 조명, 핸드크림)",
  "조심할시간": "주의가 필요한 시간대 (예: 오후 3-5시) 또는 특별히 없으면 null"
}

⭐⭐⭐ 절대 준수: 운세는 220-330자 사이! 330자 초과 금지! 9-11문장! ⭐⭐⭐

필수 구조 (간결하게):
"오늘 ${sign} 당신에게는 [분위기 1-2문장]. 
아침에는 [오전 조언 2문장]. 
오후에는 [오후 조언 2문장]. 
저녁에는 [저녁 마무리 2문장]. 
[긍정 메시지 1-2문장]."`;

  return prompt;
}

module.exports = {
  generateHoroscopePrompt
};
